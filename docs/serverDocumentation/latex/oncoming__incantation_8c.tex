\doxysection{/home/arthur/\+Tek2/\+Project/\+Zappy/server/src/game/incantation/oncoming\+\_\+incantation.c File Reference}
\hypertarget{oncoming__incantation_8c}{}\label{oncoming__incantation_8c}\index{/home/arthur/Tek2/Project/Zappy/server/src/game/incantation/oncoming\_incantation.c@{/home/arthur/Tek2/Project/Zappy/server/src/game/incantation/oncoming\_incantation.c}}
{\ttfamily \#include "{}incantation\+\_\+condition.\+h"{}}\newline
{\ttfamily \#include "{}macro.\+h"{}}\newline
{\ttfamily \#include "{}utils.\+h"{}}\newline
{\ttfamily \#include $<$stdint.\+h$>$}\newline
{\ttfamily \#include "{}server.\+h"{}}\newline
{\ttfamily \#include $<$stdlib.\+h$>$}\newline
{\ttfamily \#include $<$string.\+h$>$}\newline
{\ttfamily \#include $<$sys/socket.\+h$>$}\newline
Include dependency graph for oncoming\+\_\+incantation.\+c\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{oncoming__incantation_8c__incl}
\end{center}
\end{figure}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \mbox{\hyperlink{oncoming__incantation_8c_a2cc562915c160e89d0eccf1e20db09ef}{remove\+\_\+needed\+\_\+ressources}} (\mbox{\hyperlink{server_8h_ae80c6c8b9f9e5f88c65337bb1cd2eb65}{map\+\_\+t}} \texorpdfstring{$\ast$}{*}tile, uint8\+\_\+t level)
\begin{DoxyCompactList}\small\item\em Remove required resources from a tile for incantation. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{oncoming__incantation_8c_ae69c8f49b83d58af83f552a6b59f72a6}{check\+\_\+if\+\_\+incantation\+\_\+failed}} (\mbox{\hyperlink{server_8h_a21bca4ad2bc83c2b3f0fe45dce419625}{client\+\_\+data\+\_\+t}} \texorpdfstring{$\ast$}{*}incantator, \mbox{\hyperlink{server_8h_a7bfebc8e763f36d1870198931d6b5eb1}{client\+\_\+t}} \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}clients, \mbox{\hyperlink{server_8h_ae80c6c8b9f9e5f88c65337bb1cd2eb65}{map\+\_\+t}} \texorpdfstring{$\ast$}{*}tile)
\begin{DoxyCompactList}\small\item\em Check if an incantation has failed due to changed conditions. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{oncoming__incantation_8c_a3b618ded680289014d8910b708d65219}{handle\+\_\+oncoming\+\_\+incantation}} (\mbox{\hyperlink{server_8h_a0d46b4d18005bd6a95dddba0e65bddf6}{server\+\_\+t}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{server_8c_ab140ac62eb02ac9134b3120c0a6829e6}{server}}, \mbox{\hyperlink{server_8h_a0a742c24c6cf5a8824f8b0399778b0f4}{response\+\_\+t}} \texorpdfstring{$\ast$}{*}response, \mbox{\hyperlink{server_8h_a2fc1b64f51f8225195d32592e6fe8fc5}{request\+\_\+t}} \texorpdfstring{$\ast$}{*}request)
\begin{DoxyCompactList}\small\item\em Handle incantation ritual request from a client. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\Hypertarget{oncoming__incantation_8c_ae69c8f49b83d58af83f552a6b59f72a6}\label{oncoming__incantation_8c_ae69c8f49b83d58af83f552a6b59f72a6} 
\index{oncoming\_incantation.c@{oncoming\_incantation.c}!check\_if\_incantation\_failed@{check\_if\_incantation\_failed}}
\index{check\_if\_incantation\_failed@{check\_if\_incantation\_failed}!oncoming\_incantation.c@{oncoming\_incantation.c}}
\doxysubsubsection{\texorpdfstring{check\_if\_incantation\_failed()}{check\_if\_incantation\_failed()}}
{\footnotesize\ttfamily int check\+\_\+if\+\_\+incantation\+\_\+failed (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{server_8h_a21bca4ad2bc83c2b3f0fe45dce419625}{client\+\_\+data\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{incantator,  }\item[{\mbox{\hyperlink{server_8h_a7bfebc8e763f36d1870198931d6b5eb1}{client\+\_\+t}} \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}}]{clients,  }\item[{\mbox{\hyperlink{server_8h_ae80c6c8b9f9e5f88c65337bb1cd2eb65}{map\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{tile }\end{DoxyParamCaption})}



Check if an incantation has failed due to changed conditions. 

Check if incantation has failed due to conditions.

This function verifies if the incantation should fail by checking if the incantator moved or if resources/players are insufficient.


\begin{DoxyParams}{Parameters}
{\em incantator} & Pointer to the incantator\textquotesingle{}s client data \\
\hline
{\em clients} & Array of all clients on the server \\
\hline
{\em tile} & Pointer to the map tile where incantation takes place \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
SUCCESS if conditions are still met, ERROR if failed 
\end{DoxyReturn}
\Hypertarget{oncoming__incantation_8c_a3b618ded680289014d8910b708d65219}\label{oncoming__incantation_8c_a3b618ded680289014d8910b708d65219} 
\index{oncoming\_incantation.c@{oncoming\_incantation.c}!handle\_oncoming\_incantation@{handle\_oncoming\_incantation}}
\index{handle\_oncoming\_incantation@{handle\_oncoming\_incantation}!oncoming\_incantation.c@{oncoming\_incantation.c}}
\doxysubsubsection{\texorpdfstring{handle\_oncoming\_incantation()}{handle\_oncoming\_incantation()}}
{\footnotesize\ttfamily int handle\+\_\+oncoming\+\_\+incantation (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{server_8h_a0d46b4d18005bd6a95dddba0e65bddf6}{server\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{server,  }\item[{\mbox{\hyperlink{server_8h_a0a742c24c6cf5a8824f8b0399778b0f4}{response\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{response,  }\item[{\mbox{\hyperlink{server_8h_a2fc1b64f51f8225195d32592e6fe8fc5}{request\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{request }\end{DoxyParamCaption})}



Handle incantation ritual request from a client. 

Handle incantation command from AI player.

This function validates all preconditions and either initiates a new ritual or handles completion of an ongoing incantation.


\begin{DoxyParams}{Parameters}
{\em server} & Pointer to the server structure \\
\hline
{\em response} & Pointer to the response structure \\
\hline
{\em request} & Pointer to the client request containing player data \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
SUCCESS if incantation handled, ERROR if conditions not met 
\end{DoxyReturn}
\Hypertarget{oncoming__incantation_8c_a2cc562915c160e89d0eccf1e20db09ef}\label{oncoming__incantation_8c_a2cc562915c160e89d0eccf1e20db09ef} 
\index{oncoming\_incantation.c@{oncoming\_incantation.c}!remove\_needed\_ressources@{remove\_needed\_ressources}}
\index{remove\_needed\_ressources@{remove\_needed\_ressources}!oncoming\_incantation.c@{oncoming\_incantation.c}}
\doxysubsubsection{\texorpdfstring{remove\_needed\_ressources()}{remove\_needed\_ressources()}}
{\footnotesize\ttfamily int remove\+\_\+needed\+\_\+ressources (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{server_8h_ae80c6c8b9f9e5f88c65337bb1cd2eb65}{map\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{tile,  }\item[{uint8\+\_\+t}]{level }\end{DoxyParamCaption})}



Remove required resources from a tile for incantation. 

Remove required resources from tile for incantation.

This function removes the resources needed for an incantation of the specified level from the given map tile.


\begin{DoxyParams}{Parameters}
{\em tile} & Pointer to the map tile to remove resources from \\
\hline
{\em level} & Level of the incantation (0-\/6) \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
SUCCESS on successful removal, ERROR on invalid parameters 
\end{DoxyReturn}
