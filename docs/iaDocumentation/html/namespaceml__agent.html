<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Zappy AI: ml_agent Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Zappy AI
   </div>
   <div id="projectbrief">Zappy AI is a powerful AI agent designed to play the game Zappy, utilizing advanced strategies and techniques to achieve victory.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">ml_agent Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a6e7305e0d884226317ab96e618107c44"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceml__agent.html#a6e7305e0d884226317ab96e618107c44">create_help_message</a> (level, food_count)</td></tr>
<tr class="separator:a6e7305e0d884226317ab96e618107c44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a486e419667aac29edcd12a284e5baca7"><td class="memItemLeft" align="right" valign="top">tuple[int, int]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceml__agent.html#a486e419667aac29edcd12a284e5baca7">get_position</a> (index, total_cells)</td></tr>
<tr class="separator:a486e419667aac29edcd12a284e5baca7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84060b4a9c2ab00453d731c73225bfeb"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceml__agent.html#a84060b4a9c2ab00453d731c73225bfeb">search_closest_resource</a> (client, needed_resources)</td></tr>
<tr class="separator:a84060b4a9c2ab00453d731c73225bfeb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac32ae4ffbe1a000c2abceab0b4fb8295"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceml__agent.html#ac32ae4ffbe1a000c2abceab0b4fb8295">get_action</a> (client, needed_resources)</td></tr>
<tr class="separator:ac32ae4ffbe1a000c2abceab0b4fb8295"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4c12c1fad04c6a53fb906f1758677bc"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceml__agent.html#ae4c12c1fad04c6a53fb906f1758677bc">get_resources</a> (client, needed_resources)</td></tr>
<tr class="separator:ae4c12c1fad04c6a53fb906f1758677bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1814891991624109c95a1a88cf740d26"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceml__agent.html#a1814891991624109c95a1a88cf740d26">analyze_vision</a> (client)</td></tr>
<tr class="separator:a1814891991624109c95a1a88cf740d26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9a14bdb074964695efd9ab86cb10056"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceml__agent.html#aa9a14bdb074964695efd9ab86cb10056">define_needed_resources</a> (client)</td></tr>
<tr class="separator:aa9a14bdb074964695efd9ab86cb10056"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb61fdecf9b02f2745d9d6a951989c63"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceml__agent.html#aeb61fdecf9b02f2745d9d6a951989c63">verify_incantation</a> (client, current_cell, needed_resources)</td></tr>
<tr class="separator:aeb61fdecf9b02f2745d9d6a951989c63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b7962500500e78d576dec2bb32cde8d"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceml__agent.html#a0b7962500500e78d576dec2bb32cde8d">setting_up_incantation</a> (client, current_cell)</td></tr>
<tr class="separator:a0b7962500500e78d576dec2bb32cde8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6da7c7a87ed584b61c4d30659840e6e"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceml__agent.html#aa6da7c7a87ed584b61c4d30659840e6e">get_action_from_broadcast</a> (client, direction)</td></tr>
<tr class="separator:aa6da7c7a87ed584b61c4d30659840e6e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aadac41cd7b8166bf10c4c79c25d3cdd3"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceml__agent.html#aadac41cd7b8166bf10c4c79c25d3cdd3">strategy</a> (client)</td></tr>
<tr class="separator:aadac41cd7b8166bf10c4c79c25d3cdd3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">@file ml_agent.py
@brief Machine Learning Agent for Zappy AI
@author Epitech Project 2025
@date 2025

This module implements a machine learning agent for the Zappy AI game.
</pre> </div><h2 class="groupheader">Function Documentation</h2>
<a id="a1814891991624109c95a1a88cf740d26" name="a1814891991624109c95a1a88cf740d26"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1814891991624109c95a1a88cf740d26">&#9670;&#160;</a></span>analyze_vision()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def ml_agent.analyze_vision </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>client</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">@brief Analyzes the client's vision data to categorize cells
@param client: The ZappyClient object containing the client's state
@return: A dictionary with the total number of cells, food cells, and resource cells

@details This function processes the client's last look at the game world,
categorizing each cell into food or resources. It creates a dictionary that
contains the total number of cells, a list of food cells, and a list of resource cells.
Each cell is represented by its index, x and y coordinates, and its content.
The function iterates through the vision data, calculates the (x, y) position of each cell
using the `get_position` function, and checks if the cell contains food or resources.
The results are stored in a dictionary that is returned at the end.
</pre> 
<p class="definition">Definition at line <a class="el" href="ml__agent_8py_source.html#l00205">205</a> of file <a class="el" href="ml__agent_8py_source.html">ml_agent.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  205</span><span class="keyword">def </span>analyze_vision(client):</div>
<div class="line"><span class="lineno">  206</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  207</span><span class="stringliteral">    </span><span class="preprocessor">@brief</span> Analyzes the client<span class="stringliteral">&#39;s vision data to categorize cells</span></div>
<div class="line"><span class="lineno">  208</span><span class="stringliteral">    </span><span class="preprocessor">@param</span> client: The ZappyClient object containing the client<span class="stringliteral">&#39;s state</span></div>
<div class="line"><span class="lineno">  209</span><span class="stringliteral">    </span><span class="preprocessor">@return</span>: A dictionary <span class="keyword">with</span> the total number of cells, food cells, <span class="keywordflow">and</span> resource cells</div>
<div class="line"><span class="lineno">  210</span> </div>
<div class="line"><span class="lineno">  211</span>    <span class="preprocessor">@details</span> This function processes the client<span class="stringliteral">&#39;s last look at the game world,</span></div>
<div class="line"><span class="lineno">  212</span><span class="stringliteral">    categorizing each cell into food </span><span class="keywordflow">or</span> resources. It creates a dictionary that</div>
<div class="line"><span class="lineno">  213</span>    contains the total number of cells, a list of food cells, <span class="keywordflow">and</span> a list of resource cells.</div>
<div class="line"><span class="lineno">  214</span>    Each cell <span class="keywordflow">is</span> represented by its index, x <span class="keywordflow">and</span> y coordinates, <span class="keywordflow">and</span> its content.</div>
<div class="line"><span class="lineno">  215</span>    The function iterates through the vision data, calculates the (x, y) position of each cell</div>
<div class="line"><span class="lineno">  216</span>    using the `get_position` function, <span class="keywordflow">and</span> checks <span class="keywordflow">if</span> the cell contains food <span class="keywordflow">or</span> resources.</div>
<div class="line"><span class="lineno">  217</span>    The results are stored <span class="keywordflow">in</span> a dictionary that <span class="keywordflow">is</span> returned at the end.</div>
<div class="line"><span class="lineno">  218</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  219</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  220</span><span class="stringliteral">    vision_data = client.last_look</span></div>
<div class="line"><span class="lineno">  221</span><span class="stringliteral">    analyzed_vision = {</span></div>
<div class="line"><span class="lineno">  222</span><span class="stringliteral">        &#39;total_cells&#39;</span>: len(vision_data),</div>
<div class="line"><span class="lineno">  223</span>        <span class="stringliteral">&#39;food&#39;</span>: [],</div>
<div class="line"><span class="lineno">  224</span>        <span class="stringliteral">&#39;resources&#39;</span>: []</div>
<div class="line"><span class="lineno">  225</span>    }</div>
<div class="line"><span class="lineno">  226</span> </div>
<div class="line"><span class="lineno">  227</span>    <span class="keywordflow">for</span> index, cell <span class="keywordflow">in</span> enumerate(vision_data):</div>
<div class="line"><span class="lineno">  228</span>        x, y = get_position(index, len(vision_data))</div>
<div class="line"><span class="lineno">  229</span> </div>
<div class="line"><span class="lineno">  230</span>        cell_info = {</div>
<div class="line"><span class="lineno">  231</span>            <span class="stringliteral">&#39;index&#39;</span>: index,</div>
<div class="line"><span class="lineno">  232</span>            <span class="stringliteral">&#39;x&#39;</span>: x,</div>
<div class="line"><span class="lineno">  233</span>            <span class="stringliteral">&#39;y&#39;</span>: y,</div>
<div class="line"><span class="lineno">  234</span>            <span class="stringliteral">&#39;content&#39;</span>: cell</div>
<div class="line"><span class="lineno">  235</span>        }</div>
<div class="line"><span class="lineno">  236</span> </div>
<div class="line"><span class="lineno">  237</span>        <span class="keywordflow">if</span> <span class="stringliteral">&#39;food&#39;</span> <span class="keywordflow">in</span> cell_info[<span class="stringliteral">&#39;content&#39;</span>]:</div>
<div class="line"><span class="lineno">  238</span>            analyzed_vision[<span class="stringliteral">&#39;food&#39;</span>].append(cell_info)</div>
<div class="line"><span class="lineno">  239</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  240</span>            analyzed_vision[<span class="stringliteral">&#39;resources&#39;</span>].append(cell_info)</div>
<div class="line"><span class="lineno">  241</span> </div>
<div class="line"><span class="lineno">  242</span>    <span class="keywordflow">return</span> analyzed_vision</div>
<div class="line"><span class="lineno">  243</span> </div>
<div class="line"><span class="lineno">  244</span> </div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceml__agent_a1814891991624109c95a1a88cf740d26_cgraph.png" border="0" usemap="#anamespaceml__agent_a1814891991624109c95a1a88cf740d26_cgraph" alt=""/></div>
<map name="anamespaceml__agent_a1814891991624109c95a1a88cf740d26_cgraph" id="anamespaceml__agent_a1814891991624109c95a1a88cf740d26_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,168,31"/>
<area shape="rect" href="namespaceml__agent.html#a486e419667aac29edcd12a284e5baca7" title=" " alt="" coords="216,5,364,31"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceml__agent_a1814891991624109c95a1a88cf740d26_icgraph.png" border="0" usemap="#anamespaceml__agent_a1814891991624109c95a1a88cf740d26_icgraph" alt=""/></div>
<map name="anamespaceml__agent_a1814891991624109c95a1a88cf740d26_icgraph" id="anamespaceml__agent_a1814891991624109c95a1a88cf740d26_icgraph">
<area shape="rect" title=" " alt="" coords="555,13,717,38"/>
<area shape="rect" href="namespaceml__agent.html#aadac41cd7b8166bf10c4c79c25d3cdd3" title=" " alt="" coords="381,13,507,38"/>
<area shape="rect" href="namespaceprotocole.html#a495fd7de955092e4625c8ba71b9ccf4f" title=" " alt="" coords="179,13,333,38"/>
<area shape="rect" href="namespaceprotocole.html#aedf77434e86bcc6b9e0eaf0d9449137e" title=" " alt="" coords="5,5,131,45"/>
</map>
</div>

</div>
</div>
<a id="a6e7305e0d884226317ab96e618107c44" name="a6e7305e0d884226317ab96e618107c44"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e7305e0d884226317ab96e618107c44">&#9670;&#160;</a></span>create_help_message()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def ml_agent.create_help_message </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>food_count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">@brief Creates a help message for incantation assistance
@param level: The current level of the player
@param food_count: The amount of food the player has
@return: A formatted help message string

@details This function generates a message that can be broadcasted to other players
to request assistance for an incantation. The message includes the player's current level
and the amount of food they have. The message format is standardized for easy recognition.
</pre> 
<p class="definition">Definition at line <a class="el" href="ml__agent_8py_source.html#l00016">16</a> of file <a class="el" href="ml__agent_8py_source.html">ml_agent.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   16</span><span class="keyword">def </span>create_help_message(level, food_count):</div>
<div class="line"><span class="lineno">   17</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   18</span><span class="stringliteral">    </span><span class="preprocessor">@brief</span> Creates a help message <span class="keywordflow">for</span> incantation assistance</div>
<div class="line"><span class="lineno">   19</span>    <span class="preprocessor">@param</span> level: The current level of the player</div>
<div class="line"><span class="lineno">   20</span>    <span class="preprocessor">@param</span> food_count: The amount of food the player has</div>
<div class="line"><span class="lineno">   21</span>    <span class="preprocessor">@return</span>: A formatted help message string</div>
<div class="line"><span class="lineno">   22</span> </div>
<div class="line"><span class="lineno">   23</span>    <span class="preprocessor">@details</span> This function generates a message that can be broadcasted to other players</div>
<div class="line"><span class="lineno">   24</span>    to request assistance <span class="keywordflow">for</span> an incantation. The message includes the player<span class="stringliteral">&#39;s current level</span></div>
<div class="line"><span class="lineno">   25</span><span class="stringliteral">    </span><span class="keywordflow">and</span> the amount of food they have. The message format <span class="keywordflow">is</span> standardized <span class="keywordflow">for</span> easy recognition.</div>
<div class="line"><span class="lineno">   26</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   27</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   28</span><span class="stringliteral">    </span><span class="keywordflow">return</span> f<span class="stringliteral">&quot;I_need_help_to_level_up_to_{level + 1}_with_{food_count}&quot;</span></div>
<div class="line"><span class="lineno">   29</span> </div>
<div class="line"><span class="lineno">   30</span> </div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceml__agent_a6e7305e0d884226317ab96e618107c44_icgraph.png" border="0" usemap="#anamespaceml__agent_a6e7305e0d884226317ab96e618107c44_icgraph" alt=""/></div>
<map name="anamespaceml__agent_a6e7305e0d884226317ab96e618107c44_icgraph" id="anamespaceml__agent_a6e7305e0d884226317ab96e618107c44_icgraph">
<area shape="rect" title=" " alt="" coords="741,35,887,75"/>
<area shape="rect" href="namespaceml__agent.html#a0b7962500500e78d576dec2bb32cde8d" title=" " alt="" coords="555,5,693,45"/>
<area shape="rect" href="namespaceml__agent.html#aadac41cd7b8166bf10c4c79c25d3cdd3" title=" " alt="" coords="381,42,507,67"/>
<area shape="rect" href="namespaceprotocole.html#a495fd7de955092e4625c8ba71b9ccf4f" title=" " alt="" coords="179,42,333,67"/>
<area shape="rect" href="namespaceprotocole.html#aedf77434e86bcc6b9e0eaf0d9449137e" title=" " alt="" coords="5,35,131,75"/>
</map>
</div>

</div>
</div>
<a id="aa9a14bdb074964695efd9ab86cb10056" name="aa9a14bdb074964695efd9ab86cb10056"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa9a14bdb074964695efd9ab86cb10056">&#9670;&#160;</a></span>define_needed_resources()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def ml_agent.define_needed_resources </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>client</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">@brief Defines the resources needed for the client's current level
@param client: The ZappyClient object containing the client's state
@return: A dictionary of resources needed by the client

@details This function checks the client's current level and returns a dictionary
containing the resources needed for that level. The resources are defined in a
predefined dictionary that maps levels to their required resources.
</pre> 
<p class="definition">Definition at line <a class="el" href="ml__agent_8py_source.html#l00245">245</a> of file <a class="el" href="ml__agent_8py_source.html">ml_agent.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  245</span><span class="keyword">def </span>define_needed_resources(client):</div>
<div class="line"><span class="lineno">  246</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  247</span><span class="stringliteral">    </span><span class="preprocessor">@brief</span> Defines the resources needed <span class="keywordflow">for</span> the client<span class="stringliteral">&#39;s current level</span></div>
<div class="line"><span class="lineno">  248</span><span class="stringliteral">    </span><span class="preprocessor">@param</span> client: The ZappyClient object containing the client<span class="stringliteral">&#39;s state</span></div>
<div class="line"><span class="lineno">  249</span><span class="stringliteral">    </span><span class="preprocessor">@return</span>: A dictionary of resources needed by the client</div>
<div class="line"><span class="lineno">  250</span> </div>
<div class="line"><span class="lineno">  251</span>    <span class="preprocessor">@details</span> This function checks the client<span class="stringliteral">&#39;s current level and returns a dictionary</span></div>
<div class="line"><span class="lineno">  252</span><span class="stringliteral">    containing the resources needed </span><span class="keywordflow">for</span> that level. The resources are defined <span class="keywordflow">in</span> a</div>
<div class="line"><span class="lineno">  253</span>    predefined dictionary that maps levels to their required resources.</div>
<div class="line"><span class="lineno">  254</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  255</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  256</span><span class="stringliteral">    needed = client.needed_resources</span></div>
<div class="line"><span class="lineno">  257</span><span class="stringliteral">    inventory = client.inventory</span></div>
<div class="line"><span class="lineno">  258</span><span class="stringliteral">    missing_resources = {}</span></div>
<div class="line"><span class="lineno">  259</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  260</span><span class="stringliteral">    valid_resources = [&quot;linemate&quot;</span>, <span class="stringliteral">&quot;deraumere&quot;</span>, <span class="stringliteral">&quot;sibur&quot;</span>, <span class="stringliteral">&quot;mendiane&quot;</span>, <span class="stringliteral">&quot;phiras&quot;</span>, <span class="stringliteral">&quot;thystame&quot;</span>]</div>
<div class="line"><span class="lineno">  261</span> </div>
<div class="line"><span class="lineno">  262</span>    <span class="keywordflow">for</span> resource, quantity <span class="keywordflow">in</span> needed.items():</div>
<div class="line"><span class="lineno">  263</span>        <span class="keywordflow">if</span> inventory.get(resource, 0) &lt; quantity <span class="keywordflow">and</span> resource <span class="keywordflow">in</span> valid_resources:</div>
<div class="line"><span class="lineno">  264</span>            missing_resources[resource] = quantity - inventory.get(resource, 0)</div>
<div class="line"><span class="lineno">  265</span> </div>
<div class="line"><span class="lineno">  266</span>    <span class="keywordflow">return</span> missing_resources</div>
<div class="line"><span class="lineno">  267</span> </div>
<div class="line"><span class="lineno">  268</span> </div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceml__agent_aa9a14bdb074964695efd9ab86cb10056_icgraph.png" border="0" usemap="#anamespaceml__agent_aa9a14bdb074964695efd9ab86cb10056_icgraph" alt=""/></div>
<map name="anamespaceml__agent_aa9a14bdb074964695efd9ab86cb10056_icgraph" id="anamespaceml__agent_aa9a14bdb074964695efd9ab86cb10056_icgraph">
<area shape="rect" title=" " alt="" coords="555,5,717,45"/>
<area shape="rect" href="namespaceml__agent.html#aadac41cd7b8166bf10c4c79c25d3cdd3" title=" " alt="" coords="381,13,507,38"/>
<area shape="rect" href="namespaceprotocole.html#a495fd7de955092e4625c8ba71b9ccf4f" title=" " alt="" coords="179,13,333,38"/>
<area shape="rect" href="namespaceprotocole.html#aedf77434e86bcc6b9e0eaf0d9449137e" title=" " alt="" coords="5,5,131,45"/>
</map>
</div>

</div>
</div>
<a id="ac32ae4ffbe1a000c2abceab0b4fb8295" name="ac32ae4ffbe1a000c2abceab0b4fb8295"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac32ae4ffbe1a000c2abceab0b4fb8295">&#9670;&#160;</a></span>get_action()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def ml_agent.get_action </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>needed_resources</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">@brief Determines the next action for the client based on needed resources
@param client: The ZappyClient object containing the client's state
@param needed_resources: A dictionary of resources needed by the client
@return: A tuple containing the action to take and the resource name if applicable

@details This function decides the next action for the client based on the resources
it needs. It first searches for the closest resource that matches the needed resources.
If no resources are found, it checks if the client has reached the maximum number of
consecutive turns without finding a resource. If so, it resets the turn count and
sets the action to move forward. If the client has a last target direction, it checks
if the distance to that target is zero and decides to turn left or right accordingly.
If a resource is found, it checks the coordinates of the resource and decides whether
to move forward, turn left, or turn right based on the resource's position relative to the client.
If the resource is at the center (0, 0), it sets the action to take the resource.
If the resource is directly in front (0, y &gt; 0), it moves forward. If the resource is to the right or left,
it updates the last target direction and sets the action to move forward.
If the resource is to the right (x &gt; 0) or left (x &lt; 0), it updates the last target direction and sets
the action to move forward, while also updating the distance to the target.
If the client has not reached the maximum consecutive turns, it increments the turn count and decides
to turn left or right randomly.
</pre> 
<p class="definition">Definition at line <a class="el" href="ml__agent_8py_source.html#l00098">98</a> of file <a class="el" href="ml__agent_8py_source.html">ml_agent.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   98</span><span class="keyword">def </span>get_action(client, needed_resources):</div>
<div class="line"><span class="lineno">   99</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  100</span><span class="stringliteral">    </span><span class="preprocessor">@brief</span> Determines the next action <span class="keywordflow">for</span> the client based on needed resources</div>
<div class="line"><span class="lineno">  101</span>    <span class="preprocessor">@param</span> client: The ZappyClient object containing the client<span class="stringliteral">&#39;s state</span></div>
<div class="line"><span class="lineno">  102</span><span class="stringliteral">    </span><span class="preprocessor">@param</span> needed_resources: A dictionary of resources needed by the client</div>
<div class="line"><span class="lineno">  103</span>    <span class="preprocessor">@return</span>: A tuple containing the action to take <span class="keywordflow">and</span> the resource name <span class="keywordflow">if</span> applicable</div>
<div class="line"><span class="lineno">  104</span> </div>
<div class="line"><span class="lineno">  105</span>    <span class="preprocessor">@details</span> This function decides the next action <span class="keywordflow">for</span> the client based on the resources</div>
<div class="line"><span class="lineno">  106</span>    it needs. It first searches <span class="keywordflow">for</span> the closest resource that matches the needed resources.</div>
<div class="line"><span class="lineno">  107</span>    If no resources are found, it checks <span class="keywordflow">if</span> the client has reached the maximum number of</div>
<div class="line"><span class="lineno">  108</span>    consecutive turns without finding a resource. If so, it resets the turn count <span class="keywordflow">and</span></div>
<div class="line"><span class="lineno">  109</span>    sets the action to move forward. If the client has a last target direction, it checks</div>
<div class="line"><span class="lineno">  110</span>    <span class="keywordflow">if</span> the distance to that target <span class="keywordflow">is</span> zero <span class="keywordflow">and</span> decides to turn left <span class="keywordflow">or</span> right accordingly.</div>
<div class="line"><span class="lineno">  111</span>    If a resource <span class="keywordflow">is</span> found, it checks the coordinates of the resource <span class="keywordflow">and</span> decides whether</div>
<div class="line"><span class="lineno">  112</span>    to move forward, turn left, <span class="keywordflow">or</span> turn right based on the resource<span class="stringliteral">&#39;s position relative to the client.</span></div>
<div class="line"><span class="lineno">  113</span><span class="stringliteral">    If the resource </span><span class="keywordflow">is</span> at the center (0, 0), it sets the action to take the resource.</div>
<div class="line"><span class="lineno">  114</span>    If the resource <span class="keywordflow">is</span> directly <span class="keywordflow">in</span> front (0, y &gt; 0), it moves forward. If the resource <span class="keywordflow">is</span> to the right <span class="keywordflow">or</span> left,</div>
<div class="line"><span class="lineno">  115</span>    it updates the last target direction <span class="keywordflow">and</span> sets the action to move forward.</div>
<div class="line"><span class="lineno">  116</span>    If the resource <span class="keywordflow">is</span> to the right (x &gt; 0) <span class="keywordflow">or</span> left (x &lt; 0), it updates the last target direction <span class="keywordflow">and</span> sets</div>
<div class="line"><span class="lineno">  117</span>    the action to move forward, <span class="keywordflow">while</span> also updating the distance to the target.</div>
<div class="line"><span class="lineno">  118</span>    If the client has <span class="keywordflow">not</span> reached the maximum consecutive turns, it increments the turn count <span class="keywordflow">and</span> decides</div>
<div class="line"><span class="lineno">  119</span>    to turn left <span class="keywordflow">or</span> right randomly.</div>
<div class="line"><span class="lineno">  120</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  121</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  122</span><span class="stringliteral">    closest_resources = search_closest_resource(client, needed_resources)</span></div>
<div class="line"><span class="lineno">  123</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  124</span><span class="stringliteral">    </span><span class="keywordflow">if</span> closest_resources <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  125</span>        <span class="keywordflow">if</span> client.move[<span class="stringliteral">&quot;consecutive_turns&quot;</span>] &gt;= utils.MAX_CONSECUTIVE_TURNS:</div>
<div class="line"><span class="lineno">  126</span>            client.move[<span class="stringliteral">&quot;consecutive_turns&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  127</span>            client.move[<span class="stringliteral">&quot;forward&quot;</span>] = <span class="keyword">True</span></div>
<div class="line"><span class="lineno">  128</span>            <span class="keywordflow">return</span> utils.FORWARD, <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  129</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  130</span>            <span class="keywordflow">if</span> random.random() &lt; 0.5:</div>
<div class="line"><span class="lineno">  131</span>                client.move[<span class="stringliteral">&quot;consecutive_turns&quot;</span>] += 1</div>
<div class="line"><span class="lineno">  132</span>                <span class="keywordflow">return</span> utils.RIGHT, <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  133</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  134</span>                client.move[<span class="stringliteral">&quot;consecutive_turns&quot;</span>] += 1</div>
<div class="line"><span class="lineno">  135</span>                <span class="keywordflow">return</span> utils.LEFT, <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  136</span> </div>
<div class="line"><span class="lineno">  137</span>    x, y = closest_resources[<span class="stringliteral">&quot;x&quot;</span>], closest_resources[<span class="stringliteral">&quot;y&quot;</span>]</div>
<div class="line"><span class="lineno">  138</span>    resources_name = closest_resources[<span class="stringliteral">&quot;resource_name&quot;</span>]</div>
<div class="line"><span class="lineno">  139</span> </div>
<div class="line"><span class="lineno">  140</span>    <span class="keywordflow">if</span> x == 0 <span class="keywordflow">and</span> y == 0:</div>
<div class="line"><span class="lineno">  141</span>        client.move[<span class="stringliteral">&quot;consecutive_turns&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  142</span>        client.move[<span class="stringliteral">&quot;forward&quot;</span>] = <span class="keyword">False</span></div>
<div class="line"><span class="lineno">  143</span>        client.move[<span class="stringliteral">&quot;distance_to_target&quot;</span>] = utils.NO_TARGET</div>
<div class="line"><span class="lineno">  144</span>        client.move[<span class="stringliteral">&quot;last_target&quot;</span>] = <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  145</span>        <span class="keywordflow">return</span> utils.TAKE, resources_name</div>
<div class="line"><span class="lineno">  146</span> </div>
<div class="line"><span class="lineno">  147</span>    <span class="keywordflow">if</span> x == 0 <span class="keywordflow">and</span> y &gt; 0:</div>
<div class="line"><span class="lineno">  148</span>        client.move[<span class="stringliteral">&quot;consecutive_turns&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  149</span>        client.move[<span class="stringliteral">&quot;forward&quot;</span>] = <span class="keyword">True</span></div>
<div class="line"><span class="lineno">  150</span>        <span class="keywordflow">return</span> utils.FORWARD, <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  151</span> </div>
<div class="line"><span class="lineno">  152</span>    <span class="keywordflow">if</span> client.move[<span class="stringliteral">&quot;last_target&quot;</span>] == <span class="stringliteral">&quot;right&quot;</span> <span class="keywordflow">and</span> client.move[<span class="stringliteral">&quot;distance_to_target&quot;</span>] == 0:</div>
<div class="line"><span class="lineno">  153</span>        client.move[<span class="stringliteral">&quot;consecutive_turns&quot;</span>] += 1</div>
<div class="line"><span class="lineno">  154</span>        client.move[<span class="stringliteral">&quot;distance_to_target&quot;</span>] = utils.NO_TARGET</div>
<div class="line"><span class="lineno">  155</span>        <span class="keywordflow">return</span> utils.RIGHT, <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  156</span> </div>
<div class="line"><span class="lineno">  157</span>    <span class="keywordflow">if</span> client.move[<span class="stringliteral">&quot;last_target&quot;</span>] == <span class="stringliteral">&quot;left&quot;</span> <span class="keywordflow">and</span> client.move[<span class="stringliteral">&quot;distance_to_target&quot;</span>] == 0:</div>
<div class="line"><span class="lineno">  158</span>        client.move[<span class="stringliteral">&quot;consecutive_turns&quot;</span>] += 1</div>
<div class="line"><span class="lineno">  159</span>        client.move[<span class="stringliteral">&quot;distance_to_target&quot;</span>] = utils.NO_TARGET</div>
<div class="line"><span class="lineno">  160</span>        <span class="keywordflow">return</span> utils.LEFT, <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  161</span> </div>
<div class="line"><span class="lineno">  162</span>    <span class="keywordflow">if</span> client.move[<span class="stringliteral">&quot;consecutive_turns&quot;</span>] &gt;= utils.MAX_CONSECUTIVE_TURNS:</div>
<div class="line"><span class="lineno">  163</span>        client.move[<span class="stringliteral">&quot;consecutive_turns&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  164</span>        client.move[<span class="stringliteral">&quot;forward&quot;</span>] = <span class="keyword">True</span></div>
<div class="line"><span class="lineno">  165</span>        <span class="keywordflow">return</span> utils.FORWARD, <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  166</span> </div>
<div class="line"><span class="lineno">  167</span>    <span class="keywordflow">if</span> x &gt; 0:</div>
<div class="line"><span class="lineno">  168</span>        client.move[<span class="stringliteral">&quot;last_target&quot;</span>] = <span class="stringliteral">&quot;right&quot;</span></div>
<div class="line"><span class="lineno">  169</span>        client.move[<span class="stringliteral">&quot;forward&quot;</span>] = <span class="keyword">True</span></div>
<div class="line"><span class="lineno">  170</span>        client.move[<span class="stringliteral">&quot;distance_to_target&quot;</span>] = y - 1</div>
<div class="line"><span class="lineno">  171</span>        <span class="keywordflow">return</span> utils.FORWARD, <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  172</span> </div>
<div class="line"><span class="lineno">  173</span>    <span class="keywordflow">if</span> x &lt; 0:</div>
<div class="line"><span class="lineno">  174</span>        client.move[<span class="stringliteral">&quot;last_target&quot;</span>] = <span class="stringliteral">&quot;left&quot;</span></div>
<div class="line"><span class="lineno">  175</span>        client.move[<span class="stringliteral">&quot;forward&quot;</span>] = <span class="keyword">True</span></div>
<div class="line"><span class="lineno">  176</span>        client.move[<span class="stringliteral">&quot;distance_to_target&quot;</span>] = y - 1</div>
<div class="line"><span class="lineno">  177</span>        <span class="keywordflow">return</span> utils.FORWARD, <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  178</span> </div>
<div class="line"><span class="lineno">  179</span>    client.move[<span class="stringliteral">&quot;consecutive_turns&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  180</span>    client.move[<span class="stringliteral">&quot;forward&quot;</span>] = <span class="keyword">True</span></div>
<div class="line"><span class="lineno">  181</span>    <span class="keywordflow">return</span> <span class="keywordtype">None</span>, <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  182</span> </div>
<div class="line"><span class="lineno">  183</span> </div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceml__agent_ac32ae4ffbe1a000c2abceab0b4fb8295_cgraph.png" border="0" usemap="#anamespaceml__agent_ac32ae4ffbe1a000c2abceab0b4fb8295_cgraph" alt=""/></div>
<map name="anamespaceml__agent_ac32ae4ffbe1a000c2abceab0b4fb8295_cgraph" id="anamespaceml__agent_ac32ae4ffbe1a000c2abceab0b4fb8295_cgraph">
<area shape="rect" title=" " alt="" coords="5,13,144,38"/>
<area shape="rect" href="namespaceml__agent.html#a84060b4a9c2ab00453d731c73225bfeb" title=" " alt="" coords="192,5,359,45"/>
<area shape="rect" href="namespaceml__agent.html#a486e419667aac29edcd12a284e5baca7" title=" " alt="" coords="407,13,555,38"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceml__agent_ac32ae4ffbe1a000c2abceab0b4fb8295_icgraph.png" border="0" usemap="#anamespaceml__agent_ac32ae4ffbe1a000c2abceab0b4fb8295_icgraph" alt=""/></div>
<map name="anamespaceml__agent_ac32ae4ffbe1a000c2abceab0b4fb8295_icgraph" id="anamespaceml__agent_ac32ae4ffbe1a000c2abceab0b4fb8295_icgraph">
<area shape="rect" title=" " alt="" coords="763,31,901,56"/>
<area shape="rect" href="namespaceml__agent.html#ae4c12c1fad04c6a53fb906f1758677bc" title=" " alt="" coords="555,5,715,31"/>
<area shape="rect" href="namespaceml__agent.html#aadac41cd7b8166bf10c4c79c25d3cdd3" title=" " alt="" coords="381,31,507,56"/>
<area shape="rect" href="namespaceprotocole.html#a495fd7de955092e4625c8ba71b9ccf4f" title=" " alt="" coords="179,31,333,56"/>
<area shape="rect" href="namespaceprotocole.html#aedf77434e86bcc6b9e0eaf0d9449137e" title=" " alt="" coords="5,23,131,63"/>
</map>
</div>

</div>
</div>
<a id="aa6da7c7a87ed584b61c4d30659840e6e" name="aa6da7c7a87ed584b61c4d30659840e6e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6da7c7a87ed584b61c4d30659840e6e">&#9670;&#160;</a></span>get_action_from_broadcast()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def ml_agent.get_action_from_broadcast </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>direction</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">@brief Executes the action based on the direction received from a broadcast
@param client: The ZappyClient object containing the client's state
@param direction: The direction to move based on the broadcast
@return: None

@details This function interprets the direction received from a broadcast message
and executes the corresponding actions. It uses a predefined mapping of directions
to actions, where each direction corresponds to a list of actions to be executed.
The function checks the direction and executes the actions in the order specified
in the mapping. If the direction is not recognized, it defaults to an empty action list.
The actions include moving forward, turning left, or turning right.
</pre> 
<p class="definition">Definition at line <a class="el" href="ml__agent_8py_source.html#l00346">346</a> of file <a class="el" href="ml__agent_8py_source.html">ml_agent.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  346</span><span class="keyword">def </span>get_action_from_broadcast(client, direction):</div>
<div class="line"><span class="lineno">  347</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  348</span><span class="stringliteral">    </span><span class="preprocessor">@brief</span> Executes the action based on the direction received <span class="keyword">from</span> a broadcast</div>
<div class="line"><span class="lineno">  349</span>    <span class="preprocessor">@param</span> client: The ZappyClient object containing the client<span class="stringliteral">&#39;s state</span></div>
<div class="line"><span class="lineno">  350</span><span class="stringliteral">    </span><span class="preprocessor">@param</span> direction: The direction to move based on the broadcast</div>
<div class="line"><span class="lineno">  351</span>    <span class="preprocessor">@return</span>: <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  352</span> </div>
<div class="line"><span class="lineno">  353</span>    <span class="preprocessor">@details</span> This function interprets the direction received <span class="keyword">from</span> a broadcast message</div>
<div class="line"><span class="lineno">  354</span>    <span class="keywordflow">and</span> executes the corresponding actions. It uses a predefined mapping of directions</div>
<div class="line"><span class="lineno">  355</span>    to actions, where each direction corresponds to a list of actions to be executed.</div>
<div class="line"><span class="lineno">  356</span>    The function checks the direction <span class="keywordflow">and</span> executes the actions <span class="keywordflow">in</span> the order specified</div>
<div class="line"><span class="lineno">  357</span>    <span class="keywordflow">in</span> the mapping. If the direction <span class="keywordflow">is</span> <span class="keywordflow">not</span> recognized, it defaults to an empty action list.</div>
<div class="line"><span class="lineno">  358</span>    The actions include moving forward, turning left, <span class="keywordflow">or</span> turning right.</div>
<div class="line"><span class="lineno">  359</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  360</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  361</span><span class="stringliteral">    direction_actions = {</span></div>
<div class="line"><span class="lineno">  362</span><span class="stringliteral">        0: [],</span></div>
<div class="line"><span class="lineno">  363</span><span class="stringliteral">        1: [utils.FORWARD],</span></div>
<div class="line"><span class="lineno">  364</span><span class="stringliteral">        2: [utils.FORWARD, utils.LEFT],</span></div>
<div class="line"><span class="lineno">  365</span><span class="stringliteral">        3: [utils.LEFT, utils.FORWARD],</span></div>
<div class="line"><span class="lineno">  366</span><span class="stringliteral">        4: [utils.LEFT, utils.FORWARD, utils.LEFT],</span></div>
<div class="line"><span class="lineno">  367</span><span class="stringliteral">        5: [utils.LEFT, utils.LEFT, utils.FORWARD],</span></div>
<div class="line"><span class="lineno">  368</span><span class="stringliteral">        6: [utils.RIGHT, utils.FORWARD, utils.RIGHT],</span></div>
<div class="line"><span class="lineno">  369</span><span class="stringliteral">        7: [utils.RIGHT, utils.FORWARD],</span></div>
<div class="line"><span class="lineno">  370</span><span class="stringliteral">        8: [utils.FORWARD, utils.RIGHT],</span></div>
<div class="line"><span class="lineno">  371</span><span class="stringliteral">    }</span></div>
<div class="line"><span class="lineno">  372</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  373</span><span class="stringliteral">    actions = direction_actions.get(direction, [])</span></div>
<div class="line"><span class="lineno">  374</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  375</span><span class="stringliteral">    </span><span class="keywordflow">for</span> action <span class="keywordflow">in</span> actions:</div>
<div class="line"><span class="lineno">  376</span>        <a class="code hl_function" href="namespaceprotocole.html#a3acad8af847b0f628f74a3148ffc310a">protocole.execute_command</a>(client, action, <span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno">  377</span> </div>
<div class="line"><span class="lineno">  378</span>    client.help_direction = 0</div>
<div class="line"><span class="lineno">  379</span> </div>
<div class="ttc" id="anamespaceprotocole_html_a3acad8af847b0f628f74a3148ffc310a"><div class="ttname"><a href="namespaceprotocole.html#a3acad8af847b0f628f74a3148ffc310a">protocole.execute_command</a></div><div class="ttdeci">None execute_command(client, command, args)</div><div class="ttdef"><b>Definition:</b> <a href="protocole_8py_source.html#l00336">protocole.py:336</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceml__agent_aa6da7c7a87ed584b61c4d30659840e6e_cgraph.png" border="0" usemap="#anamespaceml__agent_aa6da7c7a87ed584b61c4d30659840e6e_cgraph" alt=""/></div>
<map name="anamespaceml__agent_aa6da7c7a87ed584b61c4d30659840e6e_cgraph" id="anamespaceml__agent_aa6da7c7a87ed584b61c4d30659840e6e_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,144,45"/>
<area shape="rect" href="namespaceprotocole.html#a3acad8af847b0f628f74a3148ffc310a" title=" " alt="" coords="192,13,380,38"/>
<area shape="rect" href="namespaceprotocole.html#a7e26184e97471ebc8b0372ff3bbe96fd" title=" " alt="" coords="428,13,595,38"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceml__agent_aa6da7c7a87ed584b61c4d30659840e6e_icgraph.png" border="0" usemap="#anamespaceml__agent_aa6da7c7a87ed584b61c4d30659840e6e_icgraph" alt=""/></div>
<map name="anamespaceml__agent_aa6da7c7a87ed584b61c4d30659840e6e_icgraph" id="anamespaceml__agent_aa6da7c7a87ed584b61c4d30659840e6e_icgraph">
<area shape="rect" title=" " alt="" coords="555,5,693,45"/>
<area shape="rect" href="namespaceml__agent.html#aadac41cd7b8166bf10c4c79c25d3cdd3" title=" " alt="" coords="381,13,507,38"/>
<area shape="rect" href="namespaceprotocole.html#a495fd7de955092e4625c8ba71b9ccf4f" title=" " alt="" coords="179,13,333,38"/>
<area shape="rect" href="namespaceprotocole.html#aedf77434e86bcc6b9e0eaf0d9449137e" title=" " alt="" coords="5,5,131,45"/>
</map>
</div>

</div>
</div>
<a id="a486e419667aac29edcd12a284e5baca7" name="a486e419667aac29edcd12a284e5baca7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a486e419667aac29edcd12a284e5baca7">&#9670;&#160;</a></span>get_position()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> tuple[int, int] ml_agent.get_position </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>total_cells</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">@brief Calculates the (x, y) position in a spiral grid based on the index
@param index: The index of the cell in the spiral grid
@param total_cells: The total number of cells in the spiral grid
@return: A tuple (x, y) representing the position in the grid

@details This function computes the (x, y) coordinates of a cell in a spiral grid
based on its index. The grid is structured such that the center cell is (0, 0),
and the cells are arranged in concentric squares. The function iterates through
the spiral layers until it finds the correct position for the given index.
If the index is 0, it returns (0, 0) as the center of the grid.
</pre> 
<p class="definition">Definition at line <a class="el" href="ml__agent_8py_source.html#l00031">31</a> of file <a class="el" href="ml__agent_8py_source.html">ml_agent.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   31</span><span class="keyword">def </span>get_position(index, total_cells) -&gt; tuple[int, int]:</div>
<div class="line"><span class="lineno">   32</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   33</span><span class="stringliteral">    </span><span class="preprocessor">@brief</span> Calculates the (x, y) position <span class="keywordflow">in</span> a spiral grid based on the index</div>
<div class="line"><span class="lineno">   34</span>    <span class="preprocessor">@param</span> index: The index of the cell <span class="keywordflow">in</span> the spiral grid</div>
<div class="line"><span class="lineno">   35</span>    <span class="preprocessor">@param</span> total_cells: The total number of cells <span class="keywordflow">in</span> the spiral grid</div>
<div class="line"><span class="lineno">   36</span>    <span class="preprocessor">@return</span>: A tuple (x, y) representing the position <span class="keywordflow">in</span> the grid</div>
<div class="line"><span class="lineno">   37</span> </div>
<div class="line"><span class="lineno">   38</span>    <span class="preprocessor">@details</span> This function computes the (x, y) coordinates of a cell <span class="keywordflow">in</span> a spiral grid</div>
<div class="line"><span class="lineno">   39</span>    based on its index. The grid <span class="keywordflow">is</span> structured such that the center cell <span class="keywordflow">is</span> (0, 0),</div>
<div class="line"><span class="lineno">   40</span>    <span class="keywordflow">and</span> the cells are arranged <span class="keywordflow">in</span> concentric squares. The function iterates through</div>
<div class="line"><span class="lineno">   41</span>    the spiral layers until it finds the correct position <span class="keywordflow">for</span> the given index.</div>
<div class="line"><span class="lineno">   42</span>    If the index <span class="keywordflow">is</span> 0, it returns (0, 0) <span class="keyword">as</span> the center of the grid.</div>
<div class="line"><span class="lineno">   43</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   44</span><span class="stringliteral">    </span><span class="keywordflow">if</span> index == 0:</div>
<div class="line"><span class="lineno">   45</span>        <span class="keywordflow">return</span> (0, 0)</div>
<div class="line"><span class="lineno">   46</span> </div>
<div class="line"><span class="lineno">   47</span>    current_index = 1</div>
<div class="line"><span class="lineno">   48</span>    distance = 1</div>
<div class="line"><span class="lineno">   49</span> </div>
<div class="line"><span class="lineno">   50</span>    <span class="keywordflow">while</span> current_index &lt; total_cells:</div>
<div class="line"><span class="lineno">   51</span>        line = distance * 2 + 1</div>
<div class="line"><span class="lineno">   52</span>        <span class="keywordflow">if</span> current_index + line &gt; index:</div>
<div class="line"><span class="lineno">   53</span>            x = index - current_index - distance</div>
<div class="line"><span class="lineno">   54</span>            y = distance</div>
<div class="line"><span class="lineno">   55</span>            <span class="keywordflow">return</span> (x, y)</div>
<div class="line"><span class="lineno">   56</span>        current_index += line</div>
<div class="line"><span class="lineno">   57</span>        distance += 1</div>
<div class="line"><span class="lineno">   58</span>    <span class="keywordflow">return</span> (0, 0)</div>
<div class="line"><span class="lineno">   59</span> </div>
<div class="line"><span class="lineno">   60</span> </div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceml__agent_a486e419667aac29edcd12a284e5baca7_icgraph.png" border="0" usemap="#anamespaceml__agent_a486e419667aac29edcd12a284e5baca7_icgraph" alt=""/></div>
<map name="anamespaceml__agent_a486e419667aac29edcd12a284e5baca7_icgraph" id="anamespaceml__agent_a486e419667aac29edcd12a284e5baca7_icgraph">
<area shape="rect" title=" " alt="" coords="1188,35,1336,60"/>
<area shape="rect" href="namespaceml__agent.html#a1814891991624109c95a1a88cf740d26" title=" " alt="" coords="763,5,925,31"/>
<area shape="rect" href="namespaceml__agent.html#a84060b4a9c2ab00453d731c73225bfeb" title=" " alt="" coords="973,55,1140,95"/>
<area shape="rect" href="namespaceml__agent.html#aadac41cd7b8166bf10c4c79c25d3cdd3" title=" " alt="" coords="381,56,507,81"/>
<area shape="rect" href="namespaceprotocole.html#a495fd7de955092e4625c8ba71b9ccf4f" title=" " alt="" coords="179,56,333,81"/>
<area shape="rect" href="namespaceprotocole.html#aedf77434e86bcc6b9e0eaf0d9449137e" title=" " alt="" coords="5,49,131,89"/>
<area shape="rect" href="namespaceml__agent.html#ac32ae4ffbe1a000c2abceab0b4fb8295" title=" " alt="" coords="775,63,913,88"/>
<area shape="rect" href="namespaceml__agent.html#ae4c12c1fad04c6a53fb906f1758677bc" title=" " alt="" coords="555,107,715,132"/>
</map>
</div>

</div>
</div>
<a id="ae4c12c1fad04c6a53fb906f1758677bc" name="ae4c12c1fad04c6a53fb906f1758677bc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae4c12c1fad04c6a53fb906f1758677bc">&#9670;&#160;</a></span>get_resources()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def ml_agent.get_resources </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>needed_resources</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">@brief Executes the action to get resources based on the client's state
@param client: The ZappyClient object containing the client's state
@param needed_resources: A dictionary of resources needed by the client
@return: None

@details This function handle the action to take resources based on the client's state.
If the action is to take a resource, it executes the command to take that resource.
If the action is to move forward, it executes the command to move forward.
If the action is to turn left or right, it executes the corresponding command.
</pre> 
<p class="definition">Definition at line <a class="el" href="ml__agent_8py_source.html#l00184">184</a> of file <a class="el" href="ml__agent_8py_source.html">ml_agent.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  184</span><span class="keyword">def </span>get_resources(client, needed_resources):</div>
<div class="line"><span class="lineno">  185</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  186</span><span class="stringliteral">    </span><span class="preprocessor">@brief</span> Executes the action to get resources based on the client<span class="stringliteral">&#39;s state</span></div>
<div class="line"><span class="lineno">  187</span><span class="stringliteral">    </span><span class="preprocessor">@param</span> client: The ZappyClient object containing the client<span class="stringliteral">&#39;s state</span></div>
<div class="line"><span class="lineno">  188</span><span class="stringliteral">    </span><span class="preprocessor">@param</span> needed_resources: A dictionary of resources needed by the client</div>
<div class="line"><span class="lineno">  189</span>    <span class="preprocessor">@return</span>: <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  190</span> </div>
<div class="line"><span class="lineno">  191</span>    <span class="preprocessor">@details</span> This function handle the action to take resources based on the client<span class="stringliteral">&#39;s state.</span></div>
<div class="line"><span class="lineno">  192</span><span class="stringliteral">    If the action </span><span class="keywordflow">is</span> to take a resource, it executes the command to take that resource.</div>
<div class="line"><span class="lineno">  193</span>    If the action <span class="keywordflow">is</span> to move forward, it executes the command to move forward.</div>
<div class="line"><span class="lineno">  194</span>    If the action <span class="keywordflow">is</span> to turn left <span class="keywordflow">or</span> right, it executes the corresponding command.</div>
<div class="line"><span class="lineno">  195</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  196</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  197</span><span class="stringliteral">    action, arg = get_action(client, needed_resources)</span></div>
<div class="line"><span class="lineno">  198</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  199</span><span class="stringliteral">    </span><span class="keywordflow">if</span> action == utils.TAKE:</div>
<div class="line"><span class="lineno">  200</span>        <a class="code hl_function" href="namespaceprotocole.html#a3acad8af847b0f628f74a3148ffc310a">protocole.execute_command</a>(client, action, arg)</div>
<div class="line"><span class="lineno">  201</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  202</span>        <a class="code hl_function" href="namespaceprotocole.html#a3acad8af847b0f628f74a3148ffc310a">protocole.execute_command</a>(client, action, <span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno">  203</span> </div>
<div class="line"><span class="lineno">  204</span> </div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceml__agent_ae4c12c1fad04c6a53fb906f1758677bc_cgraph.png" border="0" usemap="#anamespaceml__agent_ae4c12c1fad04c6a53fb906f1758677bc_cgraph" alt=""/></div>
<map name="anamespaceml__agent_ae4c12c1fad04c6a53fb906f1758677bc_cgraph" id="anamespaceml__agent_ae4c12c1fad04c6a53fb906f1758677bc_cgraph">
<area shape="rect" title=" " alt="" coords="5,35,165,60"/>
<area shape="rect" href="namespaceprotocole.html#a3acad8af847b0f628f74a3148ffc310a" title=" " alt="" coords="213,8,401,33"/>
<area shape="rect" href="namespaceml__agent.html#ac32ae4ffbe1a000c2abceab0b4fb8295" title=" " alt="" coords="238,59,377,84"/>
<area shape="rect" href="namespaceprotocole.html#a7e26184e97471ebc8b0372ff3bbe96fd" title=" " alt="" coords="449,5,616,31"/>
<area shape="rect" href="namespaceml__agent.html#a84060b4a9c2ab00453d731c73225bfeb" title=" " alt="" coords="449,55,616,95"/>
<area shape="rect" href="namespaceml__agent.html#a486e419667aac29edcd12a284e5baca7" title=" " alt="" coords="664,63,812,88"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceml__agent_ae4c12c1fad04c6a53fb906f1758677bc_icgraph.png" border="0" usemap="#anamespaceml__agent_ae4c12c1fad04c6a53fb906f1758677bc_icgraph" alt=""/></div>
<map name="anamespaceml__agent_ae4c12c1fad04c6a53fb906f1758677bc_icgraph" id="anamespaceml__agent_ae4c12c1fad04c6a53fb906f1758677bc_icgraph">
<area shape="rect" title=" " alt="" coords="555,13,715,38"/>
<area shape="rect" href="namespaceml__agent.html#aadac41cd7b8166bf10c4c79c25d3cdd3" title=" " alt="" coords="381,13,507,38"/>
<area shape="rect" href="namespaceprotocole.html#a495fd7de955092e4625c8ba71b9ccf4f" title=" " alt="" coords="179,13,333,38"/>
<area shape="rect" href="namespaceprotocole.html#aedf77434e86bcc6b9e0eaf0d9449137e" title=" " alt="" coords="5,5,131,45"/>
</map>
</div>

</div>
</div>
<a id="a84060b4a9c2ab00453d731c73225bfeb" name="a84060b4a9c2ab00453d731c73225bfeb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a84060b4a9c2ab00453d731c73225bfeb">&#9670;&#160;</a></span>search_closest_resource()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def ml_agent.search_closest_resource </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>needed_resources</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">@brief Searches for the closest resource in the client's vision data
@param client: The ZappyClient object containing the client's state
@param needed_resources: A dictionary of resources needed by the client
@return: A dictionary with the closest resource's position and name, or None if no resources are found

@details This function scans the client's vision data for resources that match
the names in the `needed_resources` dictionary. It calculates the distance of each
resource from the center of the vision grid (0, 0) and keeps track of the closest
resource found. The distance is calculated using the Euclidean formula.
If a resource is found, it returns a dictionary containing the x and y coordinates
of the resource and its name. If no resources are found, it returns None.
</pre> 
<p class="definition">Definition at line <a class="el" href="ml__agent_8py_source.html#l00061">61</a> of file <a class="el" href="ml__agent_8py_source.html">ml_agent.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   61</span><span class="keyword">def </span>search_closest_resource(client, needed_resources):</div>
<div class="line"><span class="lineno">   62</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   63</span><span class="stringliteral">    </span><span class="preprocessor">@brief</span> Searches <span class="keywordflow">for</span> the closest resource <span class="keywordflow">in</span> the client<span class="stringliteral">&#39;s vision data</span></div>
<div class="line"><span class="lineno">   64</span><span class="stringliteral">    </span><span class="preprocessor">@param</span> client: The ZappyClient object containing the client<span class="stringliteral">&#39;s state</span></div>
<div class="line"><span class="lineno">   65</span><span class="stringliteral">    </span><span class="preprocessor">@param</span> needed_resources: A dictionary of resources needed by the client</div>
<div class="line"><span class="lineno">   66</span>    <span class="preprocessor">@return</span>: A dictionary <span class="keyword">with</span> the closest resource<span class="stringliteral">&#39;s position and name, or None if no resources are found</span></div>
<div class="line"><span class="lineno">   67</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   68</span><span class="stringliteral">    </span><span class="preprocessor">@details</span> This function scans the client<span class="stringliteral">&#39;s vision data for resources that match</span></div>
<div class="line"><span class="lineno">   69</span><span class="stringliteral">    the names </span><span class="keywordflow">in</span> the `needed_resources` dictionary. It calculates the distance of each</div>
<div class="line"><span class="lineno">   70</span>    resource <span class="keyword">from</span> the center of the vision grid (0, 0) <span class="keywordflow">and</span> keeps track of the closest</div>
<div class="line"><span class="lineno">   71</span>    resource found. The distance <span class="keywordflow">is</span> calculated using the Euclidean formula.</div>
<div class="line"><span class="lineno">   72</span>    If a resource <span class="keywordflow">is</span> found, it returns a dictionary containing the x <span class="keywordflow">and</span> y coordinates</div>
<div class="line"><span class="lineno">   73</span>    of the resource <span class="keywordflow">and</span> its name. If no resources are found, it returns <span class="keywordtype">None</span>.</div>
<div class="line"><span class="lineno">   74</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   75</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   76</span><span class="stringliteral">    vision_data = client.last_look</span></div>
<div class="line"><span class="lineno">   77</span><span class="stringliteral">    closest_resource = </span><span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">   78</span>    min_distance = float(<span class="stringliteral">&#39;inf&#39;</span>)</div>
<div class="line"><span class="lineno">   79</span> </div>
<div class="line"><span class="lineno">   80</span>    <span class="keywordflow">for</span> index, cell <span class="keywordflow">in</span> enumerate(vision_data):</div>
<div class="line"><span class="lineno">   81</span>        <span class="keywordflow">for</span> resource_name <span class="keywordflow">in</span> needed_resources.keys():</div>
<div class="line"><span class="lineno">   82</span>            <span class="keywordflow">if</span> resource_name <span class="keywordflow">in</span> cell.lower():</div>
<div class="line"><span class="lineno">   83</span>                x, y = get_position(index, len(vision_data))</div>
<div class="line"><span class="lineno">   84</span>                distance = math.sqrt(x * x + y * y)</div>
<div class="line"><span class="lineno">   85</span> </div>
<div class="line"><span class="lineno">   86</span>                <span class="keywordflow">if</span> distance &lt; min_distance:</div>
<div class="line"><span class="lineno">   87</span>                    min_distance = distance</div>
<div class="line"><span class="lineno">   88</span>                    closest_resource = {</div>
<div class="line"><span class="lineno">   89</span>                        <span class="stringliteral">&#39;x&#39;</span>: x,</div>
<div class="line"><span class="lineno">   90</span>                        <span class="stringliteral">&#39;y&#39;</span>: y,</div>
<div class="line"><span class="lineno">   91</span>                        <span class="stringliteral">&#39;resource_name&#39;</span>: resource_name,</div>
<div class="line"><span class="lineno">   92</span>                    }</div>
<div class="line"><span class="lineno">   93</span>                <span class="keywordflow">break</span></div>
<div class="line"><span class="lineno">   94</span> </div>
<div class="line"><span class="lineno">   95</span>    <span class="keywordflow">return</span> closest_resource</div>
<div class="line"><span class="lineno">   96</span> </div>
<div class="line"><span class="lineno">   97</span> </div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceml__agent_a84060b4a9c2ab00453d731c73225bfeb_cgraph.png" border="0" usemap="#anamespaceml__agent_a84060b4a9c2ab00453d731c73225bfeb_cgraph" alt=""/></div>
<map name="anamespaceml__agent_a84060b4a9c2ab00453d731c73225bfeb_cgraph" id="anamespaceml__agent_a84060b4a9c2ab00453d731c73225bfeb_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,172,45"/>
<area shape="rect" href="namespaceml__agent.html#a486e419667aac29edcd12a284e5baca7" title=" " alt="" coords="220,13,368,38"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceml__agent_a84060b4a9c2ab00453d731c73225bfeb_icgraph.png" border="0" usemap="#anamespaceml__agent_a84060b4a9c2ab00453d731c73225bfeb_icgraph" alt=""/></div>
<map name="anamespaceml__agent_a84060b4a9c2ab00453d731c73225bfeb_icgraph" id="anamespaceml__agent_a84060b4a9c2ab00453d731c73225bfeb_icgraph">
<area shape="rect" title=" " alt="" coords="949,23,1116,63"/>
<area shape="rect" href="namespaceml__agent.html#ac32ae4ffbe1a000c2abceab0b4fb8295" title=" " alt="" coords="763,31,901,56"/>
<area shape="rect" href="namespaceml__agent.html#ae4c12c1fad04c6a53fb906f1758677bc" title=" " alt="" coords="555,5,715,31"/>
<area shape="rect" href="namespaceml__agent.html#aadac41cd7b8166bf10c4c79c25d3cdd3" title=" " alt="" coords="381,31,507,56"/>
<area shape="rect" href="namespaceprotocole.html#a495fd7de955092e4625c8ba71b9ccf4f" title=" " alt="" coords="179,31,333,56"/>
<area shape="rect" href="namespaceprotocole.html#aedf77434e86bcc6b9e0eaf0d9449137e" title=" " alt="" coords="5,23,131,63"/>
</map>
</div>

</div>
</div>
<a id="a0b7962500500e78d576dec2bb32cde8d" name="a0b7962500500e78d576dec2bb32cde8d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0b7962500500e78d576dec2bb32cde8d">&#9670;&#160;</a></span>setting_up_incantation()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def ml_agent.setting_up_incantation </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>current_cell</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">@brief Sets up the incantation for the client based on current cell resources
@param client: The ZappyClient object containing the client's state
@param current_cell: The current cell the client is in
@return: True if the incantation can be performed, False otherwise

@details This function checks if the current cell has the required resources for
incantation and if the number of players is sufficient. It iterates through
the valid resources and checks if the quantity in the current cell meets the
client's needed resources. If any resource is present, it sets the resource
in the client's inventory. If the current cell does not have enough resources
or if the number of players is less than the required number, it returns False.
If all conditions are met, it returns True, indicating that the incantation can be performed.
</pre> 
<p class="definition">Definition at line <a class="el" href="ml__agent_8py_source.html#l00306">306</a> of file <a class="el" href="ml__agent_8py_source.html">ml_agent.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  306</span><span class="keyword">def </span>setting_up_incantation(client, current_cell):</div>
<div class="line"><span class="lineno">  307</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  308</span><span class="stringliteral">    </span><span class="preprocessor">@brief</span> Sets up the incantation <span class="keywordflow">for</span> the client based on current cell resources</div>
<div class="line"><span class="lineno">  309</span>    <span class="preprocessor">@param</span> client: The ZappyClient object containing the client<span class="stringliteral">&#39;s state</span></div>
<div class="line"><span class="lineno">  310</span><span class="stringliteral">    </span><span class="preprocessor">@param</span> current_cell: The current cell the client <span class="keywordflow">is</span> <span class="keywordflow">in</span></div>
<div class="line"><span class="lineno">  311</span>    <span class="preprocessor">@return</span>: <span class="keyword">True</span> <span class="keywordflow">if</span> the incantation can be performed, <span class="keyword">False</span> otherwise</div>
<div class="line"><span class="lineno">  312</span> </div>
<div class="line"><span class="lineno">  313</span>    <span class="preprocessor">@details</span> This function checks <span class="keywordflow">if</span> the current cell has the required resources <span class="keywordflow">for</span></div>
<div class="line"><span class="lineno">  314</span>    incantation <span class="keywordflow">and</span> <span class="keywordflow">if</span> the number of players <span class="keywordflow">is</span> sufficient. It iterates through</div>
<div class="line"><span class="lineno">  315</span>    the valid resources <span class="keywordflow">and</span> checks <span class="keywordflow">if</span> the quantity <span class="keywordflow">in</span> the current cell meets the</div>
<div class="line"><span class="lineno">  316</span>    client<span class="stringliteral">&#39;s needed resources. If any resource is present, it sets the resource</span></div>
<div class="line"><span class="lineno">  317</span><span class="stringliteral">    </span><span class="keywordflow">in</span> the client<span class="stringliteral">&#39;s inventory. If the current cell does not have enough resources</span></div>
<div class="line"><span class="lineno">  318</span><span class="stringliteral">    </span><span class="keywordflow">or</span> <span class="keywordflow">if</span> the number of players <span class="keywordflow">is</span> less than the required number, it returns <span class="keyword">False</span>.</div>
<div class="line"><span class="lineno">  319</span>    If all conditions are met, it returns <span class="keyword">True</span>, indicating that the incantation can be performed.</div>
<div class="line"><span class="lineno">  320</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  321</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  322</span><span class="stringliteral">    valid_resources = [&quot;linemate&quot;</span>, <span class="stringliteral">&quot;deraumere&quot;</span>, <span class="stringliteral">&quot;sibur&quot;</span>, <span class="stringliteral">&quot;mendiane&quot;</span>, <span class="stringliteral">&quot;phiras&quot;</span>, <span class="stringliteral">&quot;thystame&quot;</span>]</div>
<div class="line"><span class="lineno">  323</span>    count_players = current_cell.count(<span class="stringliteral">&quot;player&quot;</span>)</div>
<div class="line"><span class="lineno">  324</span>    required_players = utils.MAX_REQUIRED_PLAYERS</div>
<div class="line"><span class="lineno">  325</span> </div>
<div class="line"><span class="lineno">  326</span>    <span class="keywordflow">if</span> client.level == 1:</div>
<div class="line"><span class="lineno">  327</span>        required_players = utils.MIN_REQUIRED_PLAYERS</div>
<div class="line"><span class="lineno">  328</span> </div>
<div class="line"><span class="lineno">  329</span>    <span class="keywordflow">for</span> resource <span class="keywordflow">in</span> valid_resources:</div>
<div class="line"><span class="lineno">  330</span>        quantity = client.inventory.get(resource, 0)</div>
<div class="line"><span class="lineno">  331</span> </div>
<div class="line"><span class="lineno">  332</span>        <span class="keywordflow">if</span> quantity &gt; 0:</div>
<div class="line"><span class="lineno">  333</span>            <a class="code hl_function" href="namespaceprotocole.html#a3acad8af847b0f628f74a3148ffc310a">protocole.execute_command</a>(client, utils.SET, resource)</div>
<div class="line"><span class="lineno">  334</span> </div>
<div class="line"><span class="lineno">  335</span>        <span class="keywordflow">if</span> current_cell.count(resource) &lt; client.needed_resources.get(resource, 0):</div>
<div class="line"><span class="lineno">  336</span>            <span class="keywordflow">return</span> <span class="keyword">False</span></div>
<div class="line"><span class="lineno">  337</span> </div>
<div class="line"><span class="lineno">  338</span>    <span class="keywordflow">if</span> count_players &lt; required_players:</div>
<div class="line"><span class="lineno">  339</span>        <a class="code hl_function" href="namespaceprotocole.html#a3acad8af847b0f628f74a3148ffc310a">protocole.execute_command</a>(client, utils.BROADCAST,</div>
<div class="line"><span class="lineno">  340</span>                                  create_help_message(client.level, client.inventory.get(<span class="stringliteral">&quot;food&quot;</span>, 0)))</div>
<div class="line"><span class="lineno">  341</span>        <span class="keywordflow">return</span> <span class="keyword">False</span></div>
<div class="line"><span class="lineno">  342</span> </div>
<div class="line"><span class="lineno">  343</span>    <span class="keywordflow">return</span> <span class="keyword">True</span></div>
<div class="line"><span class="lineno">  344</span> </div>
<div class="line"><span class="lineno">  345</span> </div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceml__agent_a0b7962500500e78d576dec2bb32cde8d_cgraph.png" border="0" usemap="#anamespaceml__agent_a0b7962500500e78d576dec2bb32cde8d_cgraph" alt=""/></div>
<map name="anamespaceml__agent_a0b7962500500e78d576dec2bb32cde8d_cgraph" id="anamespaceml__agent_a0b7962500500e78d576dec2bb32cde8d_cgraph">
<area shape="rect" title=" " alt="" coords="5,35,144,75"/>
<area shape="rect" href="namespaceml__agent.html#a6e7305e0d884226317ab96e618107c44" title=" " alt="" coords="213,5,359,45"/>
<area shape="rect" href="namespaceprotocole.html#a3acad8af847b0f628f74a3148ffc310a" title=" " alt="" coords="192,70,380,95"/>
<area shape="rect" href="namespaceprotocole.html#a7e26184e97471ebc8b0372ff3bbe96fd" title=" " alt="" coords="428,70,595,95"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceml__agent_a0b7962500500e78d576dec2bb32cde8d_icgraph.png" border="0" usemap="#anamespaceml__agent_a0b7962500500e78d576dec2bb32cde8d_icgraph" alt=""/></div>
<map name="anamespaceml__agent_a0b7962500500e78d576dec2bb32cde8d_icgraph" id="anamespaceml__agent_a0b7962500500e78d576dec2bb32cde8d_icgraph">
<area shape="rect" title=" " alt="" coords="555,5,693,45"/>
<area shape="rect" href="namespaceml__agent.html#aadac41cd7b8166bf10c4c79c25d3cdd3" title=" " alt="" coords="381,13,507,38"/>
<area shape="rect" href="namespaceprotocole.html#a495fd7de955092e4625c8ba71b9ccf4f" title=" " alt="" coords="179,13,333,38"/>
<area shape="rect" href="namespaceprotocole.html#aedf77434e86bcc6b9e0eaf0d9449137e" title=" " alt="" coords="5,5,131,45"/>
</map>
</div>

</div>
</div>
<a id="aadac41cd7b8166bf10c4c79c25d3cdd3" name="aadac41cd7b8166bf10c4c79c25d3cdd3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aadac41cd7b8166bf10c4c79c25d3cdd3">&#9670;&#160;</a></span>strategy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def ml_agent.strategy </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>client</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">@brief Main strategy function for the Zappy AI client
@param client: The ZappyClient object containing the client's state
@return: None

@details This function implements the main strategy for the Zappy AI client.
It analyzes the client's vision data, defines the needed resources based on the
client's level, and manages the client's actions based on its current state.
The function first checks if the client is ready to start playing. If not, it waits
for the required number of players to start the game. If the client has enough food,
it attempts to gather resources or move around the game world. If the client is in a
critical state (low food), it prioritizes gathering food and resources. If the client
is ready to incant, it verifies if the conditions are met for performing an incantation.
If the client is waiting for help, it broadcasts a message to request assistance.
If the client is not in a critical state, it checks if it needs to gather resources
or food, and executes the appropriate actions based on the current cell's content.
</pre> 
<p class="definition">Definition at line <a class="el" href="ml__agent_8py_source.html#l00380">380</a> of file <a class="el" href="ml__agent_8py_source.html">ml_agent.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  380</span><span class="keyword">def </span>strategy(client):</div>
<div class="line"><span class="lineno">  381</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  382</span><span class="stringliteral">    </span><span class="preprocessor">@brief</span> Main strategy function <span class="keywordflow">for</span> the Zappy AI client</div>
<div class="line"><span class="lineno">  383</span>    <span class="preprocessor">@param</span> client: The ZappyClient object containing the client<span class="stringliteral">&#39;s state</span></div>
<div class="line"><span class="lineno">  384</span><span class="stringliteral">    </span><span class="preprocessor">@return</span>: <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  385</span> </div>
<div class="line"><span class="lineno">  386</span>    <span class="preprocessor">@details</span> This function implements the main strategy <span class="keywordflow">for</span> the Zappy AI client.</div>
<div class="line"><span class="lineno">  387</span>    It analyzes the client<span class="stringliteral">&#39;s vision data, defines the needed resources based on the</span></div>
<div class="line"><span class="lineno">  388</span><span class="stringliteral">    client&#39;s level, and manages the client&#39;</span>s actions based on its current state.</div>
<div class="line"><span class="lineno">  389</span>    The function first checks <span class="keywordflow">if</span> the client <span class="keywordflow">is</span> ready to start playing. If <span class="keywordflow">not</span>, it waits</div>
<div class="line"><span class="lineno">  390</span>    <span class="keywordflow">for</span> the required number of players to start the game. If the client has enough food,</div>
<div class="line"><span class="lineno">  391</span>    it attempts to gather resources <span class="keywordflow">or</span> move around the game world. If the client <span class="keywordflow">is</span> <span class="keywordflow">in</span> a</div>
<div class="line"><span class="lineno">  392</span>    critical state (low food), it prioritizes gathering food <span class="keywordflow">and</span> resources. If the client</div>
<div class="line"><span class="lineno">  393</span>    <span class="keywordflow">is</span> ready to incant, it verifies <span class="keywordflow">if</span> the conditions are met <span class="keywordflow">for</span> performing an incantation.</div>
<div class="line"><span class="lineno">  394</span>    If the client <span class="keywordflow">is</span> waiting <span class="keywordflow">for</span> help, it broadcasts a message to request assistance.</div>
<div class="line"><span class="lineno">  395</span>    If the client <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordflow">in</span> a critical state, it checks <span class="keywordflow">if</span> it needs to gather resources</div>
<div class="line"><span class="lineno">  396</span>    <span class="keywordflow">or</span> food, <span class="keywordflow">and</span> executes the appropriate actions based on the current cell<span class="stringliteral">&#39;s content.</span></div>
<div class="line"><span class="lineno">  397</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  398</span><span class="stringliteral">    </span></div>
<div class="line"><span class="lineno">  399</span><span class="stringliteral">    vision_data = analyze_vision(client)</span></div>
<div class="line"><span class="lineno">  400</span><span class="stringliteral">    needed = define_needed_resources(client)</span></div>
<div class="line"><span class="lineno">  401</span><span class="stringliteral">    food_count = client.inventory.get(&quot;food&quot;</span>, 0)</div>
<div class="line"><span class="lineno">  402</span>    current_cell = client.last_look[utils.PLAYER_CELL] <span class="keywordflow">if</span> client.last_look <span class="keywordflow">else</span> <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  403</span> </div>
<div class="line"><span class="lineno">  404</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> client.start_playing:</div>
<div class="line"><span class="lineno">  405</span>        <span class="keywordflow">if</span> client.player_in_game &gt;= utils.NBR_PLAYERS_TO_START:</div>
<div class="line"><span class="lineno">  406</span>            client.start_playing = <span class="keyword">True</span></div>
<div class="line"><span class="lineno">  407</span>            <a class="code hl_function" href="namespaceprotocole.html#a3acad8af847b0f628f74a3148ffc310a">protocole.execute_command</a>(client, utils.INVENTORY, <span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno">  408</span>            <span class="keywordflow">return</span></div>
<div class="line"><span class="lineno">  409</span> </div>
<div class="line"><span class="lineno">  410</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> client.at_max_food <span class="keywordflow">and</span> food_count &gt;= utils.MAX_FOOD:</div>
<div class="line"><span class="lineno">  411</span>            client.at_max_food = <span class="keyword">True</span></div>
<div class="line"><span class="lineno">  412</span>            client.player_in_game += 1</div>
<div class="line"><span class="lineno">  413</span>            <a class="code hl_function" href="namespaceprotocole.html#a3acad8af847b0f628f74a3148ffc310a">protocole.execute_command</a>(client, utils.BROADCAST, utils.START_MESSAGE)</div>
<div class="line"><span class="lineno">  414</span> </div>
<div class="line"><span class="lineno">  415</span>        <span class="keywordflow">if</span> vision_data[<span class="stringliteral">&quot;food&quot;</span>]:</div>
<div class="line"><span class="lineno">  416</span>            get_resources(client, {<span class="stringliteral">&quot;food&quot;</span>: 1})</div>
<div class="line"><span class="lineno">  417</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  418</span>            client.move[<span class="stringliteral">&quot;consecutive_turns&quot;</span>] += 1</div>
<div class="line"><span class="lineno">  419</span>            <span class="keywordflow">if</span> client.move[<span class="stringliteral">&quot;consecutive_turns&quot;</span>] &gt;= utils.MAX_CONSECUTIVE_TURNS:</div>
<div class="line"><span class="lineno">  420</span>                client.move[<span class="stringliteral">&quot;consecutive_turns&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  421</span>                client.move[<span class="stringliteral">&quot;forward&quot;</span>] = <span class="keyword">True</span></div>
<div class="line"><span class="lineno">  422</span>                <a class="code hl_function" href="namespaceprotocole.html#a3acad8af847b0f628f74a3148ffc310a">protocole.execute_command</a>(client, utils.FORWARD, <span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno">  423</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  424</span>                <span class="keywordflow">if</span> random.random() &lt; 0.5:</div>
<div class="line"><span class="lineno">  425</span>                    <a class="code hl_function" href="namespaceprotocole.html#a3acad8af847b0f628f74a3148ffc310a">protocole.execute_command</a>(client, utils.RIGHT, <span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno">  426</span>                <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  427</span>                    <a class="code hl_function" href="namespaceprotocole.html#a3acad8af847b0f628f74a3148ffc310a">protocole.execute_command</a>(client, utils.FORWARD, <span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno">  428</span>        <a class="code hl_function" href="namespaceprotocole.html#a3acad8af847b0f628f74a3148ffc310a">protocole.execute_command</a>(client, utils.INVENTORY, <span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno">  429</span>        <span class="keywordflow">return</span></div>
<div class="line"><span class="lineno">  430</span> </div>
<div class="line"><span class="lineno">  431</span>    <span class="keywordflow">if</span> food_count &lt; utils.CRITICAL_FOOD:</div>
<div class="line"><span class="lineno">  432</span>        client.status = <span class="stringliteral">&quot;critique&quot;</span></div>
<div class="line"><span class="lineno">  433</span> </div>
<div class="line"><span class="lineno">  434</span>    <span class="keywordflow">if</span> client.status == <span class="stringliteral">&quot;critique&quot;</span>:</div>
<div class="line"><span class="lineno">  435</span>        <span class="keywordflow">if</span> food_count &gt; utils.GOOD_FOOD:</div>
<div class="line"><span class="lineno">  436</span>            client.status = <span class="stringliteral">&quot;good&quot;</span></div>
<div class="line"><span class="lineno">  437</span> </div>
<div class="line"><span class="lineno">  438</span>    <span class="keywordflow">if</span> client.status == <span class="stringliteral">&quot;critique&quot;</span>:</div>
<div class="line"><span class="lineno">  439</span>        client.help_status = <span class="keyword">False</span></div>
<div class="line"><span class="lineno">  440</span>        <span class="keywordflow">if</span> vision_data[<span class="stringliteral">&quot;food&quot;</span>]:</div>
<div class="line"><span class="lineno">  441</span>            get_resources(client, {<span class="stringliteral">&quot;food&quot;</span>: 1})</div>
<div class="line"><span class="lineno">  442</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  443</span>            client.move[<span class="stringliteral">&quot;consecutive_turns&quot;</span>] += 1</div>
<div class="line"><span class="lineno">  444</span>            <span class="keywordflow">if</span> client.move[<span class="stringliteral">&quot;consecutive_turns&quot;</span>] &gt;= utils.MAX_CONSECUTIVE_TURNS:</div>
<div class="line"><span class="lineno">  445</span>                client.move[<span class="stringliteral">&quot;consecutive_turns&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  446</span>                client.move[<span class="stringliteral">&quot;forward&quot;</span>] = <span class="keyword">True</span></div>
<div class="line"><span class="lineno">  447</span>                <a class="code hl_function" href="namespaceprotocole.html#a3acad8af847b0f628f74a3148ffc310a">protocole.execute_command</a>(client, utils.FORWARD, <span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno">  448</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  449</span>                <span class="keywordflow">if</span> random.random() &lt; 0.5:</div>
<div class="line"><span class="lineno">  450</span>                    <a class="code hl_function" href="namespaceprotocole.html#a3acad8af847b0f628f74a3148ffc310a">protocole.execute_command</a>(client, utils.RIGHT, <span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno">  451</span>                <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  452</span>                    <a class="code hl_function" href="namespaceprotocole.html#a3acad8af847b0f628f74a3148ffc310a">protocole.execute_command</a>(client, utils.FORWARD, <span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno">  453</span>        <a class="code hl_function" href="namespaceprotocole.html#a3acad8af847b0f628f74a3148ffc310a">protocole.execute_command</a>(client, utils.INVENTORY, <span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno">  454</span>        <span class="keywordflow">return</span></div>
<div class="line"><span class="lineno">  455</span> </div>
<div class="line"><span class="lineno">  456</span>    <span class="keywordflow">if</span> client.help_status:</div>
<div class="line"><span class="lineno">  457</span>        get_action_from_broadcast(client, client.help_direction)</div>
<div class="line"><span class="lineno">  458</span>        <span class="keywordflow">if</span> <span class="stringliteral">&quot;food&quot;</span> <span class="keywordflow">in</span> current_cell.lower():</div>
<div class="line"><span class="lineno">  459</span>            <a class="code hl_function" href="namespaceprotocole.html#a3acad8af847b0f628f74a3148ffc310a">protocole.execute_command</a>(client, utils.TAKE, <span class="stringliteral">&quot;food&quot;</span>)</div>
<div class="line"><span class="lineno">  460</span>        <a class="code hl_function" href="namespaceprotocole.html#a3acad8af847b0f628f74a3148ffc310a">protocole.execute_command</a>(client, utils.INVENTORY, <span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno">  461</span>        <span class="keywordflow">return</span></div>
<div class="line"><span class="lineno">  462</span> </div>
<div class="line"><span class="lineno">  463</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> client.incantation:</div>
<div class="line"><span class="lineno">  464</span>        verify_incantation(client, current_cell, needed)</div>
<div class="line"><span class="lineno">  465</span> </div>
<div class="line"><span class="lineno">  466</span>    <span class="keywordflow">if</span> client.incantation:</div>
<div class="line"><span class="lineno">  467</span>        <span class="keywordflow">if</span> setting_up_incantation(client, current_cell):</div>
<div class="line"><span class="lineno">  468</span>            <a class="code hl_function" href="namespaceprotocole.html#a3acad8af847b0f628f74a3148ffc310a">protocole.execute_command</a>(client, utils.INCANTATION, <span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno">  469</span>        <a class="code hl_function" href="namespaceprotocole.html#a3acad8af847b0f628f74a3148ffc310a">protocole.execute_command</a>(client, utils.INVENTORY, <span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno">  470</span>        <span class="keywordflow">return</span></div>
<div class="line"><span class="lineno">  471</span> </div>
<div class="line"><span class="lineno">  472</span>    <span class="keywordflow">if</span> client.waiting_for_help:</div>
<div class="line"><span class="lineno">  473</span>        <span class="keywordflow">if</span> len(client.commands) &gt; utils.MAX_COMMANDS - 1:</div>
<div class="line"><span class="lineno">  474</span>            <a class="code hl_function" href="namespaceprotocole.html#a3acad8af847b0f628f74a3148ffc310a">protocole.execute_command</a>(client, utils.INVENTORY, <span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno">  475</span>            <span class="keywordflow">return</span></div>
<div class="line"><span class="lineno">  476</span>        <a class="code hl_function" href="namespaceprotocole.html#a3acad8af847b0f628f74a3148ffc310a">protocole.execute_command</a>(client, utils.RIGHT, <span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno">  477</span>        <a class="code hl_function" href="namespaceprotocole.html#a3acad8af847b0f628f74a3148ffc310a">protocole.execute_command</a>(client, utils.RIGHT, <span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno">  478</span>        <a class="code hl_function" href="namespaceprotocole.html#a3acad8af847b0f628f74a3148ffc310a">protocole.execute_command</a>(client, utils.RIGHT, <span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno">  479</span>        <a class="code hl_function" href="namespaceprotocole.html#a3acad8af847b0f628f74a3148ffc310a">protocole.execute_command</a>(client, utils.RIGHT, <span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno">  480</span>        <a class="code hl_function" href="namespaceprotocole.html#a3acad8af847b0f628f74a3148ffc310a">protocole.execute_command</a>(client, utils.BROADCAST,</div>
<div class="line"><span class="lineno">  481</span>                                  create_help_message(client.level, client.inventory.get(<span class="stringliteral">&quot;food&quot;</span>)))</div>
<div class="line"><span class="lineno">  482</span>        <a class="code hl_function" href="namespaceprotocole.html#a3acad8af847b0f628f74a3148ffc310a">protocole.execute_command</a>(client, utils.INVENTORY, <span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno">  483</span>        <span class="keywordflow">return</span></div>
<div class="line"><span class="lineno">  484</span> </div>
<div class="line"><span class="lineno">  485</span>    <span class="keywordflow">if</span> needed <span class="keywordflow">and</span> current_cell:</div>
<div class="line"><span class="lineno">  486</span>        action, arg = get_action(client, needed)</div>
<div class="line"><span class="lineno">  487</span>        <span class="keywordflow">if</span> action == utils.TAKE <span class="keywordflow">and</span> arg <span class="keywordflow">in</span> current_cell.lower():</div>
<div class="line"><span class="lineno">  488</span>            <a class="code hl_function" href="namespaceprotocole.html#a3acad8af847b0f628f74a3148ffc310a">protocole.execute_command</a>(client, action, arg)</div>
<div class="line"><span class="lineno">  489</span>            <a class="code hl_function" href="namespaceprotocole.html#a3acad8af847b0f628f74a3148ffc310a">protocole.execute_command</a>(client, utils.INVENTORY, <span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno">  490</span>            <span class="keywordflow">return</span></div>
<div class="line"><span class="lineno">  491</span> </div>
<div class="line"><span class="lineno">  492</span>    <span class="keywordflow">if</span> food_count &lt; 20 <span class="keywordflow">and</span> client.status == <span class="stringliteral">&quot;good&quot;</span>:</div>
<div class="line"><span class="lineno">  493</span>        <span class="keywordflow">if</span> <span class="stringliteral">&quot;food&quot;</span> <span class="keywordflow">in</span> current_cell.lower():</div>
<div class="line"><span class="lineno">  494</span>            <a class="code hl_function" href="namespaceprotocole.html#a3acad8af847b0f628f74a3148ffc310a">protocole.execute_command</a>(client, utils.TAKE, <span class="stringliteral">&quot;food&quot;</span>)</div>
<div class="line"><span class="lineno">  495</span>            <a class="code hl_function" href="namespaceprotocole.html#a3acad8af847b0f628f74a3148ffc310a">protocole.execute_command</a>(client, utils.INVENTORY, <span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno">  496</span>            <span class="keywordflow">return</span></div>
<div class="line"><span class="lineno">  497</span> </div>
<div class="line"><span class="lineno">  498</span>        <span class="keywordflow">for</span> resource, quantity <span class="keywordflow">in</span> needed.items():</div>
<div class="line"><span class="lineno">  499</span>            <span class="keywordflow">if</span> resource <span class="keywordflow">in</span> current_cell.lower():</div>
<div class="line"><span class="lineno">  500</span>                get_resources(client, {resource: quantity})</div>
<div class="line"><span class="lineno">  501</span>                <a class="code hl_function" href="namespaceprotocole.html#a3acad8af847b0f628f74a3148ffc310a">protocole.execute_command</a>(client, utils.INVENTORY, <span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno">  502</span>                <span class="keywordflow">return</span></div>
<div class="line"><span class="lineno">  503</span> </div>
<div class="line"><span class="lineno">  504</span>        <span class="keywordflow">if</span> vision_data[<span class="stringliteral">&quot;food&quot;</span>]:</div>
<div class="line"><span class="lineno">  505</span>            get_resources(client, {<span class="stringliteral">&quot;food&quot;</span>: 1})</div>
<div class="line"><span class="lineno">  506</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  507</span>            client.move[<span class="stringliteral">&quot;consecutive_turns&quot;</span>] += 1</div>
<div class="line"><span class="lineno">  508</span>            <span class="keywordflow">if</span> client.move[<span class="stringliteral">&quot;consecutive_turns&quot;</span>] &gt;= utils.MAX_CONSECUTIVE_TURNS:</div>
<div class="line"><span class="lineno">  509</span>                client.move[<span class="stringliteral">&quot;consecutive_turns&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  510</span>                client.move[<span class="stringliteral">&quot;forward&quot;</span>] = <span class="keyword">True</span></div>
<div class="line"><span class="lineno">  511</span>                <a class="code hl_function" href="namespaceprotocole.html#a3acad8af847b0f628f74a3148ffc310a">protocole.execute_command</a>(client, utils.FORWARD, <span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno">  512</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  513</span>                <span class="keywordflow">if</span> random.random() &lt; 0.5:</div>
<div class="line"><span class="lineno">  514</span>                    <a class="code hl_function" href="namespaceprotocole.html#a3acad8af847b0f628f74a3148ffc310a">protocole.execute_command</a>(client, utils.RIGHT, <span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno">  515</span>                <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  516</span>                    <a class="code hl_function" href="namespaceprotocole.html#a3acad8af847b0f628f74a3148ffc310a">protocole.execute_command</a>(client, utils.FORWARD, <span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno">  517</span> </div>
<div class="line"><span class="lineno">  518</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  519</span>        <span class="keywordflow">if</span> <span class="stringliteral">&quot;food&quot;</span> <span class="keywordflow">in</span> current_cell.lower():</div>
<div class="line"><span class="lineno">  520</span>            <a class="code hl_function" href="namespaceprotocole.html#a3acad8af847b0f628f74a3148ffc310a">protocole.execute_command</a>(client, utils.TAKE, <span class="stringliteral">&quot;food&quot;</span>)</div>
<div class="line"><span class="lineno">  521</span>            <a class="code hl_function" href="namespaceprotocole.html#a3acad8af847b0f628f74a3148ffc310a">protocole.execute_command</a>(client, utils.INVENTORY, <span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno">  522</span>            <span class="keywordflow">return</span></div>
<div class="line"><span class="lineno">  523</span> </div>
<div class="line"><span class="lineno">  524</span>        <span class="keywordflow">if</span> needed:</div>
<div class="line"><span class="lineno">  525</span>            get_resources(client, needed)</div>
<div class="line"><span class="lineno">  526</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  527</span>            <span class="keywordflow">if</span> vision_data[<span class="stringliteral">&quot;food&quot;</span>]:</div>
<div class="line"><span class="lineno">  528</span>                get_resources(client, {<span class="stringliteral">&quot;food&quot;</span>: 1})</div>
<div class="line"><span class="lineno">  529</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  530</span>                <span class="keywordflow">if</span> client.move[<span class="stringliteral">&quot;consecutive_turns&quot;</span>] &gt;= utils.MAX_CONSECUTIVE_TURNS:</div>
<div class="line"><span class="lineno">  531</span>                    client.move[<span class="stringliteral">&quot;consecutive_turns&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  532</span>                    client.move[<span class="stringliteral">&quot;forward&quot;</span>] = <span class="keyword">True</span></div>
<div class="line"><span class="lineno">  533</span>                    <a class="code hl_function" href="namespaceprotocole.html#a3acad8af847b0f628f74a3148ffc310a">protocole.execute_command</a>(client, utils.FORWARD, <span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno">  534</span>                <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  535</span>                    <span class="keywordflow">if</span> random.random() &lt; 0.5:</div>
<div class="line"><span class="lineno">  536</span>                        client.move[<span class="stringliteral">&quot;consecutive_turns&quot;</span>] += 1</div>
<div class="line"><span class="lineno">  537</span>                        <a class="code hl_function" href="namespaceprotocole.html#a3acad8af847b0f628f74a3148ffc310a">protocole.execute_command</a>(client, utils.RIGHT, <span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno">  538</span>                    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  539</span>                        <a class="code hl_function" href="namespaceprotocole.html#a3acad8af847b0f628f74a3148ffc310a">protocole.execute_command</a>(client, utils.FORWARD, <span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno">  540</span> </div>
<div class="line"><span class="lineno">  541</span>    <a class="code hl_function" href="namespaceprotocole.html#a3acad8af847b0f628f74a3148ffc310a">protocole.execute_command</a>(client, utils.INVENTORY, <span class="keywordtype">None</span>)</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceml__agent_aadac41cd7b8166bf10c4c79c25d3cdd3_cgraph.png" border="0" usemap="#anamespaceml__agent_aadac41cd7b8166bf10c4c79c25d3cdd3_cgraph" alt=""/></div>
<map name="anamespaceml__agent_aadac41cd7b8166bf10c4c79c25d3cdd3_cgraph" id="anamespaceml__agent_aadac41cd7b8166bf10c4c79c25d3cdd3_cgraph">
<area shape="rect" title=" " alt="" coords="5,220,131,245"/>
<area shape="rect" href="namespaceml__agent.html#a1814891991624109c95a1a88cf740d26" title=" " alt="" coords="643,81,806,106"/>
<area shape="rect" href="namespaceml__agent.html#a6e7305e0d884226317ab96e618107c44" title=" " alt="" coords="427,98,572,138"/>
<area shape="rect" href="namespaceml__agent.html#aa9a14bdb074964695efd9ab86cb10056" title=" " alt="" coords="187,91,349,131"/>
<area shape="rect" href="namespaceprotocole.html#a3acad8af847b0f628f74a3148ffc310a" title=" " alt="" coords="405,249,593,274"/>
<area shape="rect" href="namespaceml__agent.html#ac32ae4ffbe1a000c2abceab0b4fb8295" title=" " alt="" coords="430,334,569,360"/>
<area shape="rect" href="namespaceml__agent.html#aa6da7c7a87ed584b61c4d30659840e6e" title=" " alt="" coords="199,270,337,310"/>
<area shape="rect" href="namespaceml__agent.html#ae4c12c1fad04c6a53fb906f1758677bc" title=" " alt="" coords="188,334,348,360"/>
<area shape="rect" href="namespaceml__agent.html#a0b7962500500e78d576dec2bb32cde8d" title=" " alt="" coords="199,155,337,195"/>
<area shape="rect" href="namespaceml__agent.html#aeb61fdecf9b02f2745d9d6a951989c63" title=" " alt="" coords="179,436,357,461"/>
<area shape="rect" href="namespaceml__agent.html#a486e419667aac29edcd12a284e5baca7" title=" " alt="" coords="856,253,1004,278"/>
<area shape="rect" href="namespaceprotocole.html#a7e26184e97471ebc8b0372ff3bbe96fd" title=" " alt="" coords="641,249,808,274"/>
<area shape="rect" href="namespaceml__agent.html#a84060b4a9c2ab00453d731c73225bfeb" title=" " alt="" coords="641,299,808,339"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceml__agent_aadac41cd7b8166bf10c4c79c25d3cdd3_icgraph.png" border="0" usemap="#anamespaceml__agent_aadac41cd7b8166bf10c4c79c25d3cdd3_icgraph" alt=""/></div>
<map name="anamespaceml__agent_aadac41cd7b8166bf10c4c79c25d3cdd3_icgraph" id="anamespaceml__agent_aadac41cd7b8166bf10c4c79c25d3cdd3_icgraph">
<area shape="rect" title=" " alt="" coords="381,13,507,38"/>
<area shape="rect" href="namespaceprotocole.html#a495fd7de955092e4625c8ba71b9ccf4f" title=" " alt="" coords="179,13,333,38"/>
<area shape="rect" href="namespaceprotocole.html#aedf77434e86bcc6b9e0eaf0d9449137e" title=" " alt="" coords="5,5,131,45"/>
</map>
</div>

</div>
</div>
<a id="aeb61fdecf9b02f2745d9d6a951989c63" name="aeb61fdecf9b02f2745d9d6a951989c63"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb61fdecf9b02f2745d9d6a951989c63">&#9670;&#160;</a></span>verify_incantation()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def ml_agent.verify_incantation </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>current_cell</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>needed_resources</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">@brief Verifies if the client can perform an incantation
@param client: The ZappyClient object containing the client's state
@param current_cell: The current cell the client is in
@param needed_resources: A dictionary of resources needed by the client
@return: None

@details This function checks if the client can perform an incantation based on
the resources available in the current cell and the number of players present.
It first checks if the client has the required resources for incantation.
If the client is at level 1, it sets the required number of players to the minimum.
If the current cell does not have the needed resources or if the number of players
is less than the required number, it sets the client's incantation status to False
and waiting_for_help status to True. If the conditions are met, it sets the
client's incantation status to True and waiting_for_help status to False.
</pre> 
<p class="definition">Definition at line <a class="el" href="ml__agent_8py_source.html#l00269">269</a> of file <a class="el" href="ml__agent_8py_source.html">ml_agent.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  269</span><span class="keyword">def </span>verify_incantation(client, current_cell, needed_resources):</div>
<div class="line"><span class="lineno">  270</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  271</span><span class="stringliteral">    </span><span class="preprocessor">@brief</span> Verifies <span class="keywordflow">if</span> the client can perform an incantation</div>
<div class="line"><span class="lineno">  272</span>    <span class="preprocessor">@param</span> client: The ZappyClient object containing the client<span class="stringliteral">&#39;s state</span></div>
<div class="line"><span class="lineno">  273</span><span class="stringliteral">    </span><span class="preprocessor">@param</span> current_cell: The current cell the client <span class="keywordflow">is</span> <span class="keywordflow">in</span></div>
<div class="line"><span class="lineno">  274</span>    <span class="preprocessor">@param</span> needed_resources: A dictionary of resources needed by the client</div>
<div class="line"><span class="lineno">  275</span>    <span class="preprocessor">@return</span>: <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  276</span> </div>
<div class="line"><span class="lineno">  277</span>    <span class="preprocessor">@details</span> This function checks <span class="keywordflow">if</span> the client can perform an incantation based on</div>
<div class="line"><span class="lineno">  278</span>    the resources available <span class="keywordflow">in</span> the current cell <span class="keywordflow">and</span> the number of players present.</div>
<div class="line"><span class="lineno">  279</span>    It first checks <span class="keywordflow">if</span> the client has the required resources <span class="keywordflow">for</span> incantation.</div>
<div class="line"><span class="lineno">  280</span>    If the client <span class="keywordflow">is</span> at level 1, it sets the required number of players to the minimum.</div>
<div class="line"><span class="lineno">  281</span>    If the current cell does <span class="keywordflow">not</span> have the needed resources <span class="keywordflow">or</span> <span class="keywordflow">if</span> the number of players</div>
<div class="line"><span class="lineno">  282</span>    <span class="keywordflow">is</span> less than the required number, it sets the client<span class="stringliteral">&#39;s incantation status to False</span></div>
<div class="line"><span class="lineno">  283</span><span class="stringliteral">    </span><span class="keywordflow">and</span> waiting_for_help status to <span class="keyword">True</span>. If the conditions are met, it sets the</div>
<div class="line"><span class="lineno">  284</span>    client<span class="stringliteral">&#39;s incantation status to True and waiting_for_help status to False.</span></div>
<div class="line"><span class="lineno">  285</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  286</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  287</span><span class="stringliteral">    required_players = utils.MAX_REQUIRED_PLAYERS</span></div>
<div class="line"><span class="lineno">  288</span><span class="stringliteral">    count_players = current_cell.count(&quot;player&quot;</span>)</div>
<div class="line"><span class="lineno">  289</span> </div>
<div class="line"><span class="lineno">  290</span>    <span class="keywordflow">if</span> client.level == 1:</div>
<div class="line"><span class="lineno">  291</span>        required_players = utils.MIN_REQUIRED_PLAYERS</div>
<div class="line"><span class="lineno">  292</span> </div>
<div class="line"><span class="lineno">  293</span>    <span class="keywordflow">if</span> needed_resources:</div>
<div class="line"><span class="lineno">  294</span>        client.incantation = <span class="keyword">False</span></div>
<div class="line"><span class="lineno">  295</span>        <span class="keywordflow">return</span></div>
<div class="line"><span class="lineno">  296</span> </div>
<div class="line"><span class="lineno">  297</span>    <span class="keywordflow">if</span> count_players &lt; required_players:</div>
<div class="line"><span class="lineno">  298</span>        client.incantation = <span class="keyword">False</span></div>
<div class="line"><span class="lineno">  299</span>        client.waiting_for_help = <span class="keyword">True</span></div>
<div class="line"><span class="lineno">  300</span>        <span class="keywordflow">return</span></div>
<div class="line"><span class="lineno">  301</span> </div>
<div class="line"><span class="lineno">  302</span>    client.waiting_for_help = <span class="keyword">False</span></div>
<div class="line"><span class="lineno">  303</span>    client.incantation = <span class="keyword">True</span></div>
<div class="line"><span class="lineno">  304</span> </div>
<div class="line"><span class="lineno">  305</span> </div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceml__agent_aeb61fdecf9b02f2745d9d6a951989c63_icgraph.png" border="0" usemap="#anamespaceml__agent_aeb61fdecf9b02f2745d9d6a951989c63_icgraph" alt=""/></div>
<map name="anamespaceml__agent_aeb61fdecf9b02f2745d9d6a951989c63_icgraph" id="anamespaceml__agent_aeb61fdecf9b02f2745d9d6a951989c63_icgraph">
<area shape="rect" title=" " alt="" coords="555,13,733,38"/>
<area shape="rect" href="namespaceml__agent.html#aadac41cd7b8166bf10c4c79c25d3cdd3" title=" " alt="" coords="381,13,507,38"/>
<area shape="rect" href="namespaceprotocole.html#a495fd7de955092e4625c8ba71b9ccf4f" title=" " alt="" coords="179,13,333,38"/>
<area shape="rect" href="namespaceprotocole.html#aedf77434e86bcc6b9e0eaf0d9449137e" title=" " alt="" coords="5,5,131,45"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
