<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Zappy: /home/arthur/Tek2/Project/Zappy/server/src/game/timer_handling.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Zappy
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_41e1742e44e2de38b3bc91f993fed282.html">server</a></li><li class="navelem"><a class="el" href="dir_a063914ab482288b7b0e1b2fca86158c.html">src</a></li><li class="navelem"><a class="el" href="dir_e6b7ec297778ed9f03d97c98d106236d.html">game</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">timer_handling.c File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="macro_8h_source.html">macro.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="server_8h_source.html">server.h</a>&quot;</code><br />
<code>#include &lt;time.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for timer_handling.c:</div>
<div class="dyncontent">
<div class="center"><img src="timer__handling_8c__incl.png" border="0" usemap="#a_2home_2arthur_2Tek2_2Project_2Zappy_2server_2src_2game_2timer__handling_8c" alt=""/></div>
<map name="a_2home_2arthur_2Tek2_2Project_2Zappy_2server_2src_2game_2timer__handling_8c" id="a_2home_2arthur_2Tek2_2Project_2Zappy_2server_2src_2game_2timer__handling_8c">
<area shape="rect" title=" " alt="" coords="495,5,684,60"/>
<area shape="rect" href="macro_8h.html" title=" " alt="" coords="5,181,80,207"/>
<area shape="poly" title=" " alt="" coords="500,63,94,181,92,176,499,57"/>
<area shape="rect" href="server_8h.html" title=" " alt="" coords="552,108,627,133"/>
<area shape="poly" title=" " alt="" coords="592,60,592,94,587,94,587,60"/>
<area shape="rect" title=" " alt="" coords="1080,181,1144,207"/>
<area shape="poly" title=" " alt="" coords="676,57,1068,176,1066,182,674,63"/>
<area shape="poly" title=" " alt="" coords="552,128,360,147,230,163,94,184,93,179,229,158,359,142,551,122"/>
<area shape="rect" title=" " alt="" coords="105,181,175,207"/>
<area shape="poly" title=" " alt="" coords="552,129,398,150,189,184,188,179,397,144,551,124"/>
<area shape="rect" title=" " alt="" coords="200,181,267,207"/>
<area shape="poly" title=" " alt="" coords="552,131,281,184,280,178,551,126"/>
<area shape="rect" title=" " alt="" coords="291,181,389,207"/>
<area shape="poly" title=" " alt="" coords="552,135,394,180,393,175,551,130"/>
<area shape="rect" title=" " alt="" coords="414,181,517,207"/>
<area shape="poly" title=" " alt="" coords="571,136,499,177,496,172,568,131"/>
<area shape="rect" title=" " alt="" coords="541,181,637,207"/>
<area shape="poly" title=" " alt="" coords="592,134,592,168,587,168,587,134"/>
<area shape="rect" title=" " alt="" coords="661,181,720,207"/>
<area shape="poly" title=" " alt="" coords="607,131,664,171,661,175,604,136"/>
<area shape="rect" title=" " alt="" coords="745,181,829,207"/>
<area shape="poly" title=" " alt="" coords="622,131,742,174,741,179,620,136"/>
<area shape="rect" title=" " alt="" coords="853,181,936,207"/>
<area shape="poly" title=" " alt="" coords="627,128,840,177,839,183,626,133"/>
<area shape="poly" title=" " alt="" coords="627,122,812,141,937,157,1067,179,1066,184,936,163,812,146,627,128"/>
<area shape="rect" href="inventory_8h.html" title=" " alt="" coords="961,181,1055,207"/>
<area shape="poly" title=" " alt="" coords="628,125,947,179,947,184,627,131"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a0bb4a72798ede786f82aefeab657d2e1" id="r_a0bb4a72798ede786f82aefeab657d2e1"><td class="memItemLeft" align="right" valign="top">struct timespec&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="timer__handling_8c.html#a0bb4a72798ede786f82aefeab657d2e1">get_action_end_time</a> (<a class="el" href="server_8h.html#a0d46b4d18005bd6a95dddba0e65bddf6">server_t</a> *<a class="el" href="server_8c.html#ab140ac62eb02ac9134b3120c0a6829e6">server</a>, int action_duration)</td></tr>
<tr class="memdesc:a0bb4a72798ede786f82aefeab657d2e1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates the end time for an action based on its duration.  <br /></td></tr>
<tr class="separator:a0bb4a72798ede786f82aefeab657d2e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11940ef69e5a079d4f817c9b102bb966" id="r_a11940ef69e5a079d4f817c9b102bb966"><td class="memItemLeft" align="right" valign="top">long long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="timer__handling_8c.html#a11940ef69e5a079d4f817c9b102bb966">get_current_timer_units</a> (<a class="el" href="server_8h.html#a0d46b4d18005bd6a95dddba0e65bddf6">server_t</a> *<a class="el" href="server_8c.html#ab140ac62eb02ac9134b3120c0a6829e6">server</a>, struct timespec *timer)</td></tr>
<tr class="memdesc:a11940ef69e5a079d4f817c9b102bb966"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts elapsed real time to game timer units.  <br /></td></tr>
<tr class="separator:a11940ef69e5a079d4f817c9b102bb966"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab74c30b99cde138ba98da528968511c0" id="r_ab74c30b99cde138ba98da528968511c0"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="timer__handling_8c.html#ab74c30b99cde138ba98da528968511c0">has_time_passed</a> (<a class="el" href="server_8h.html#a0d46b4d18005bd6a95dddba0e65bddf6">server_t</a> *<a class="el" href="server_8c.html#ab140ac62eb02ac9134b3120c0a6829e6">server</a>, long long start_timer_units, int duration, struct timespec *timer)</td></tr>
<tr class="memdesc:ab74c30b99cde138ba98da528968511c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if a specified duration has elapsed since a timer started.  <br /></td></tr>
<tr class="separator:ab74c30b99cde138ba98da528968511c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a0bb4a72798ede786f82aefeab657d2e1" name="a0bb4a72798ede786f82aefeab657d2e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0bb4a72798ede786f82aefeab657d2e1">&#9670;&#160;</a></span>get_action_end_time()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct timespec get_action_end_time </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="server_8h.html#a0d46b4d18005bd6a95dddba0e65bddf6">server_t</a> *&#160;</td>
          <td class="paramname"><em>server</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>action_duration</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calculates the end time for an action based on its duration. </p>
<p>Calculate action end time based on duration.</p>
<p>This function determines when an action should complete by adding the action's duration (converted to real time) to the current time. It uses the server frequency to convert game time to real time.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">server</td><td>Pointer to the server structure for frequency info </td></tr>
    <tr><td class="paramname">action_duration</td><td>Duration of the action in game time units </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>timespec structure representing when the action will end </dd></dl>

</div>
</div>
<a id="a11940ef69e5a079d4f817c9b102bb966" name="a11940ef69e5a079d4f817c9b102bb966"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a11940ef69e5a079d4f817c9b102bb966">&#9670;&#160;</a></span>get_current_timer_units()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long long get_current_timer_units </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="server_8h.html#a0d46b4d18005bd6a95dddba0e65bddf6">server_t</a> *&#160;</td>
          <td class="paramname"><em>server</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct timespec *&#160;</td>
          <td class="paramname"><em>timer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Converts elapsed real time to game timer units. </p>
<p>Get current timer units for synchronization.</p>
<p>This function calculates how many game time units have passed since a reference timer was set. It uses the server frequency to convert real elapsed time into game time units.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">server</td><td>Pointer to the server structure for frequency info </td></tr>
    <tr><td class="paramname">timer</td><td>Pointer to the reference timespec timer </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Number of game time units elapsed since the timer was set </dd></dl>

</div>
</div>
<a id="ab74c30b99cde138ba98da528968511c0" name="ab74c30b99cde138ba98da528968511c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab74c30b99cde138ba98da528968511c0">&#9670;&#160;</a></span>has_time_passed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool has_time_passed </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="server_8h.html#a0d46b4d18005bd6a95dddba0e65bddf6">server_t</a> *&#160;</td>
          <td class="paramname"><em>server</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long long&#160;</td>
          <td class="paramname"><em>start_timer_units</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>duration</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct timespec *&#160;</td>
          <td class="paramname"><em>timer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks if a specified duration has elapsed since a timer started. </p>
<p>Check if specified time duration has passed.</p>
<p>This function determines whether enough game time units have passed since a timer was started. It compares the elapsed time against a required duration to determine if an event should trigger.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">server</td><td>Pointer to the server structure for timing calculations </td></tr>
    <tr><td class="paramname">start_timer_units</td><td>Timer units when the timer was started </td></tr>
    <tr><td class="paramname">duration</td><td>Required duration in game time units </td></tr>
    <tr><td class="paramname">timer</td><td>Pointer to the reference timespec timer </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the duration has elapsed, false otherwise </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
